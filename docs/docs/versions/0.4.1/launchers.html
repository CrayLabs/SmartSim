
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Launchers &#8212; SmartSim 0.4.1 documentation</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="SmartSim API" href="api/smartsim_api.html" />
    <link rel="prev" title="Orchestrator" href="orchestrator.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      
      
      <h1 class="site-logo" id="site-title">SmartSim 0.4.1 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="versions.html">
   Versions
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="overview.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="community.html">
   Community
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="contributing_examples.html">
   Contributing Examples
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="tutorials/getting_started/getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tutorials/online_analysis/lattice/online_analysis.html">
   Online Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tutorials/ml_inference/Inference-in-SmartSim.html">
   Online Inference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tutorials/ml_training/surrogate/train_surrogate.html">
   Online Training
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tutorials/ray/starting_ray.html">
   Ray Integration
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  SmartSim
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="experiment.html">
   Experiments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="orchestrator.html">
   Orchestrator
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Launchers
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="api/smartsim_api.html">
   SmartSim API
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  SmartRedis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="smartredis.html">
   SmartRedis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sr_integration.html">
   Integrating into a Simulation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sr_python_walkthrough.html">
   Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sr_cpp_walkthrough.html">
   C++
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sr_fortran_walkthrough.html">
   Fortran
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sr_data_structures.html">
   Data Structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sr_runtime.html">
   Runtime Requirements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="api/smartredis_api.html">
   SmartRedis API
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="changelog.html">
   Changelog
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="code_of_conduct.html">
   Code of Conduct
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="developer.html">
   Developer
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/launchers.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/CrayLabs/SmartSim"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/CrayLabs/SmartSim/issues/new?title=Issue%20on%20page%20%2Flaunchers.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#local">
   Local
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-locally">
     Running Locally
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#slurm">
   Slurm
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-on-slurm">
     Running on Slurm
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-allocations">
     Getting Allocations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#releasing-allocations">
     Releasing Allocations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pbspro">
   PBSPro
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-on-pbspro">
     Running on PBSpro
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cobalt">
   Cobalt
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-on-cobalt">
     Running on Cobalt
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lsf">
   LSF
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-on-lsf">
     Running on LSF
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Launchers</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#local">
   Local
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-locally">
     Running Locally
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#slurm">
   Slurm
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-on-slurm">
     Running on Slurm
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#getting-allocations">
     Getting Allocations
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#releasing-allocations">
     Releasing Allocations
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#pbspro">
   PBSPro
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-on-pbspro">
     Running on PBSpro
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cobalt">
   Cobalt
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-on-cobalt">
     Running on Cobalt
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lsf">
   LSF
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-on-lsf">
     Running on LSF
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <section id="launchers">
<h1>Launchers<a class="headerlink" href="#launchers" title="Permalink to this headline">¶</a></h1>
<p>SmartSim interfaces with a number of backends called <cite>launchers</cite> that
are responsible for constructing jobs based on run parameters and
launching them onto a system.</p>
<p>The <cite>launchers</cite> allow SmartSim users to interact with their system
programmatically through a python interface.
Because of this, SmartSim users do not have to leave the Jupyter Notebook,
Python REPL, or Python script to launch, query, and interact with their jobs.</p>
<dl class="simple">
<dt>SmartSim currently supports 5 <cite>launchers</cite>:</dt><dd><ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">local</span></code>: for single-node, workstation, or laptop</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slurm</span></code>: for systems using the Slurm scheduler</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pbs</span></code>: for systems using the PBSpro scheduler</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cobalt</span></code>: for systems using the Cobalt scheduler</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lsf</span></code>: for systems using the LSF scheduler</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto</span></code>: have SmartSim auto-detect the launcher to use.</p></li>
</ol>
</dd>
</dl>
<p>To specify a specific launcher, one argument needs to be provided
to the <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> initialization.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim</span> <span class="kn">import</span> <span class="n">Experiment</span>

<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;name-of-experiment&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">)</span>  <span class="c1"># local launcher</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;name-of-experiment&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;slurm&quot;</span><span class="p">)</span>  <span class="c1"># Slurm launcher</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;name-of-experiment&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;pbs&quot;</span><span class="p">)</span>    <span class="c1"># PBSpro launcher</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;name-of-experiment&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;cobalt&quot;</span><span class="p">)</span> <span class="c1"># Cobalt launcher</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;name-of-experiment&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;lsf&quot;</span><span class="p">)</span>    <span class="c1"># LSF launcher</span>
<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;name-of-experiment&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">)</span>   <span class="c1"># auto-detect launcher</span>
</pre></div>
</div>
<hr class="docutils" />
<section id="local">
<h2>Local<a class="headerlink" href="#local" title="Permalink to this headline">¶</a></h2>
<p>The local launcher can be used on laptops, workstations and single
nodes of supercomputer and cluster systems. Through
launching locally, users can prototype workflows and quickly scale
them to larger systems with minimal changes.</p>
<p>As with all launchers in SmartSim, the local launcher supports
asynchronous execution meaning once entities have been launched
the main thread of execution is not blocked. Daemon threads
that manage currently running jobs will be created when active
jobs are present within SmartSim.</p>
<p>The local launcher uses the <a class="reference external" href="https://github.com/giampaolo/psutil">psutil</a> library to execute and monitor
user-created jobs.</p>
<section id="running-locally">
<h3>Running Locally<a class="headerlink" href="#running-locally" title="Permalink to this headline">¶</a></h3>
<p>The local launcher supports the base <a class="reference internal" href="api/smartsim_api.html#rs-api"><span class="std std-ref">RunSettings API</span></a>
which can be used to run executables as well as run executables
with arbitrary launch binaries like <cite>mpiexec</cite>.</p>
<p>The local launcher is the default launcher for all <code class="docutils literal notranslate"><span class="pre">Experiment</span></code>
instances.</p>
<p>The local launcher does not support batch launching. Ensembles
are always executed in parallel but launched sequentially.</p>
</section>
</section>
<hr class="docutils" />
<section id="slurm">
<h2>Slurm<a class="headerlink" href="#slurm" title="Permalink to this headline">¶</a></h2>
<p>The Slurm launcher works directly with the Slurm scheduler to launch, query,
monitor and stop applications. During the course of an <code class="docutils literal notranslate"><span class="pre">Experiment</span></code>,
launched entities can be queried for status, completion, and errors.</p>
<p>The amount of communication between SmartSim and Slurm can be tuned
for specific guidelines of different sites by setting the
value for <code class="docutils literal notranslate"><span class="pre">jm_interval</span></code> in the SmartSim configuration file.</p>
<p>To use the Slurm launcher, specify at <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> initialization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim</span> <span class="kn">import</span> <span class="n">Experiment</span>

<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;NAMD-worklfow&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;slurm&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="running-on-slurm">
<h3>Running on Slurm<a class="headerlink" href="#running-on-slurm" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>The Slurm launcher supports three types of <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code>:</dt><dd><ol class="arabic simple">
<li><p><a class="reference internal" href="api/smartsim_api.html#srun-api"><span class="std std-ref">SrunSettings</span></a></p></li>
<li><p><a class="reference internal" href="api/smartsim_api.html#openmpi-run-api"><span class="std std-ref">MpirunSettings</span></a></p></li>
<li><p><a class="reference internal" href="api/smartsim_api.html#openmpi-exec-api"><span class="std std-ref">MpiexecSettings</span></a></p></li>
</ol>
</dd>
<dt>As well as batch settings for <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> through:</dt><dd><ol class="arabic simple">
<li><p><a class="reference internal" href="api/smartsim_api.html#sbatch-api"><span class="std std-ref">SbatchSettings</span></a></p></li>
</ol>
</dd>
</dl>
<p>Both supported <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> types above can be added
to a <code class="docutils literal notranslate"><span class="pre">SbatchSettings</span></code> batch workload through <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code>
creation.</p>
</section>
<section id="getting-allocations">
<h3>Getting Allocations<a class="headerlink" href="#getting-allocations" title="Permalink to this headline">¶</a></h3>
<p>Slurm supports a number of user facing features that other schedulers
do not. For this reason, an extra module <a class="reference internal" href="api/smartsim_api.html#slurm-module-api"><span class="std std-ref">smartsim.slurm</span></a> can be
used to obtain allocations to launch on and release them after
<code class="docutils literal notranslate"><span class="pre">Experiment</span></code> completion.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim.wlm</span> <span class="kn">import</span> <span class="n">slurm</span>
<span class="n">alloc</span> <span class="o">=</span> <span class="n">slurm</span><span class="o">.</span><span class="n">get_allocation</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The ID of the allocation is returned as a string to the user so that
they can specify what entities should run on which allocations
obtained by SmartSim.</p>
<p>Additional arguments that would have been passed to the <code class="docutils literal notranslate"><span class="pre">salloc</span></code>
command can be passed through the <code class="docutils literal notranslate"><span class="pre">options</span></code> argument in a dictionary.</p>
<p>Anything passed to the options will be processed as a Slurm
argument and appended to the salloc command with the appropriate
prefix (e.g. <cite>-</cite> or <cite>–</cite>).</p>
<dl class="simple">
<dt>For arguments without a value, pass None as the value:</dt><dd><ul class="simple">
<li><p><cite>exclusive=None</cite></p></li>
</ul>
</dd>
</dl>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim.wlm</span> <span class="kn">import</span> <span class="n">slurm</span>
<span class="n">salloc_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="s2">&quot;haswell&quot;</span><span class="p">,</span>
    <span class="s2">&quot;partition&quot;</span><span class="p">:</span> <span class="s2">&quot;debug&quot;</span><span class="p">,</span>
    <span class="s2">&quot;exclusive&quot;</span><span class="p">:</span> <span class="kc">None</span>
<span class="p">}</span>
<span class="n">alloc_id</span> <span class="o">=</span> <span class="n">slurm</span><span class="o">.</span><span class="n">get_slurm_allocation</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span>
                                      <span class="n">time</span><span class="o">=</span><span class="s2">&quot;10:00:00&quot;</span><span class="p">,</span>
                                      <span class="n">options</span><span class="o">=</span><span class="n">salloc_options</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code would generate a <code class="docutils literal notranslate"><span class="pre">salloc</span></code> command like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>salloc -N <span class="m">5</span> -C haswell --partition debug --time <span class="m">10</span>:00:00 --exclusive
</pre></div>
</div>
</section>
<section id="releasing-allocations">
<h3>Releasing Allocations<a class="headerlink" href="#releasing-allocations" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference internal" href="api/smartsim_api.html#slurm-module-api"><span class="std std-ref">smartsim.slurm</span></a> interface
also supports releasing allocations obtained in an experiment.</p>
<p>The example below releases the allocation in the example above.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim.wlm</span> <span class="kn">import</span> <span class="n">slurm</span>
<span class="n">salloc_options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;C&quot;</span><span class="p">:</span> <span class="s2">&quot;haswell&quot;</span><span class="p">,</span>
    <span class="s2">&quot;partition&quot;</span><span class="p">:</span> <span class="s2">&quot;debug&quot;</span><span class="p">,</span>
    <span class="s2">&quot;exclusive&quot;</span><span class="p">:</span> <span class="kc">None</span>
<span class="p">}</span>
<span class="n">alloc_id</span> <span class="o">=</span> <span class="n">slurm</span><span class="o">.</span><span class="n">get_slurm_allocation</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span>
                                    <span class="n">time</span><span class="o">=</span><span class="s2">&quot;10:00:00&quot;</span><span class="p">,</span>
                                    <span class="n">options</span><span class="o">=</span><span class="n">salloc_options</span><span class="p">)</span>

<span class="c1"># &lt;experiment code goes here&gt;</span>

<span class="n">slurm</span><span class="o">.</span><span class="n">release_slurm_allocation</span><span class="p">(</span><span class="n">alloc_id</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="pbspro">
<h2>PBSPro<a class="headerlink" href="#pbspro" title="Permalink to this headline">¶</a></h2>
<p>Like the Slurm launcher, the PBSPro launcher works directly with the PBSPro
scheduler to launch, query, monitor and stop applications.</p>
<p>The amount of communication between SmartSim and PBSPro can be tuned
for specific guidelines of different sites by setting the
value for <code class="docutils literal notranslate"><span class="pre">jm_interval</span></code> in the SmartSim configuration file.</p>
<p>To use the PBSpro launcher, specify at <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> initialization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim</span> <span class="kn">import</span> <span class="n">Experiment</span>

<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;LAMMPS-melt&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;pbs&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="running-on-pbspro">
<h3>Running on PBSpro<a class="headerlink" href="#running-on-pbspro" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>The PBSpro launcher supports three types of <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code>:</dt><dd><ol class="arabic simple">
<li><p><a class="reference internal" href="api/smartsim_api.html#aprun-api"><span class="std std-ref">AprunSettings</span></a></p></li>
<li><p><a class="reference internal" href="api/smartsim_api.html#openmpi-run-api"><span class="std std-ref">MpirunSettings</span></a></p></li>
<li><p><a class="reference internal" href="api/smartsim_api.html#openmpi-exec-api"><span class="std std-ref">MpiexecSettings</span></a></p></li>
</ol>
</dd>
<dt>As well as batch settings for <code class="docutils literal notranslate"><span class="pre">qsub</span></code> through:</dt><dd><ol class="arabic simple">
<li><p><a class="reference internal" href="api/smartsim_api.html#qsub-api"><span class="std std-ref">QsubBatchSettings</span></a></p></li>
</ol>
</dd>
</dl>
<p>Both supported <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> types above can be added
to a <code class="docutils literal notranslate"><span class="pre">QsubBatchSettings</span></code> batch workload through <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code>
creation.</p>
</section>
</section>
<hr class="docutils" />
<section id="cobalt">
<h2>Cobalt<a class="headerlink" href="#cobalt" title="Permalink to this headline">¶</a></h2>
<p>The Cobalt Launcher works just like the PBSPro launcher and
is compatible with ALPS and OpenMPI workloads as well.</p>
<p>To use the Cobalt launcher, specify at <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> initialization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim</span> <span class="kn">import</span> <span class="n">Experiment</span>

<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;MOM6-double-gyre&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;cobalt&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="running-on-cobalt">
<h3>Running on Cobalt<a class="headerlink" href="#running-on-cobalt" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>The Cobalt launcher supports three types of <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code>:</dt><dd><ol class="arabic simple">
<li><p><a class="reference internal" href="api/smartsim_api.html#aprun-api"><span class="std std-ref">AprunSettings</span></a></p></li>
<li><p><a class="reference internal" href="api/smartsim_api.html#openmpi-run-api"><span class="std std-ref">MpirunSettings</span></a></p></li>
<li><p><a class="reference internal" href="api/smartsim_api.html#openmpi-exec-api"><span class="std std-ref">MpiexecSettings</span></a></p></li>
</ol>
</dd>
<dt>As well as batch settings for <code class="docutils literal notranslate"><span class="pre">qsub</span></code> through:</dt><dd><ol class="arabic simple">
<li><p><a class="reference internal" href="api/smartsim_api.html#cqsub-api"><span class="std std-ref">CobaltBatchSettings</span></a></p></li>
</ol>
</dd>
</dl>
<p>Both supported <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> types above can be added
to a <code class="docutils literal notranslate"><span class="pre">CobaltBatchSettings</span></code> batch workload through <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code>
creation.</p>
</section>
</section>
<hr class="docutils" />
<section id="lsf">
<h2>LSF<a class="headerlink" href="#lsf" title="Permalink to this headline">¶</a></h2>
<p>The LSF Launcher works like the PBSPro and Cobalt launchers and
is compatible with LSF and OpenMPI workloads.</p>
<p>To use the LSF launcher, specify at <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> initialization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim</span> <span class="kn">import</span> <span class="n">Experiment</span>

<span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="s2">&quot;MOM6-double-gyre&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;lsf&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="running-on-lsf">
<h3>Running on LSF<a class="headerlink" href="#running-on-lsf" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt>The LSF launcher supports three types of <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code>:</dt><dd><ol class="arabic simple">
<li><p><a class="reference internal" href="api/smartsim_api.html#jsrun-api"><span class="std std-ref">JsrunSettings</span></a></p></li>
<li><p><a class="reference internal" href="api/smartsim_api.html#openmpi-run-api"><span class="std std-ref">MpirunSettings</span></a></p></li>
<li><p><a class="reference internal" href="api/smartsim_api.html#openmpi-exec-api"><span class="std std-ref">MpiexecSettings</span></a></p></li>
</ol>
</dd>
<dt>As well as batch settings for <code class="docutils literal notranslate"><span class="pre">bsub</span></code> through:</dt><dd><ol class="arabic simple">
<li><p><a class="reference internal" href="api/smartsim_api.html#bsub-api"><span class="std std-ref">BsubBatchSettings</span></a></p></li>
</ol>
</dd>
</dl>
<p>Both supported <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> types above can be added
to a <code class="docutils literal notranslate"><span class="pre">BsubBatchSettings</span></code> batch workload through <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code>
creation.</p>
</section>
</section>
</section>


              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="orchestrator.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Orchestrator</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="api/smartsim_api.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">SmartSim API</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Cray Labs<br/>
    
        &copy; Copyright 2021-2022, Hewlett Packard Enterprise.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>