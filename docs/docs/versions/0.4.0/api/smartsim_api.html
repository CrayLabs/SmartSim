
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>SmartSim API &#8212; SmartSim 0.4.0 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=84ace793992934648b4de8eed757e5a2" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/sphinx-book-theme.9d8b4a8b9bb19db25eeaddc40d639ba2.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SmartRedis" href="../smartredis.html" />
    <link rel="prev" title="Launchers" href="../launchers.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<div class="col-12 col-md-3 bd-sidebar site-navigation " id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">SmartSim 0.4.0 documentation</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting Started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../overview.html">
   Introduction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../installation.html">
   Installation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../community.html">
   Community
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorials
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/getting_started/getting_started.html">
   Getting Started
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/online_analysis/lattice/online_analysis.html">
   Online Analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/ml_inference/Inference-in-SmartSim.html">
   Online Inference
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/training.html">
   Online Training
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../tutorials/ray/starting_ray.html">
   Ray Integration
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  SmartSim
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../experiment.html">
   Experiments
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../orchestrator.html">
   Orchestrator
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../launchers.html">
   Launchers
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   SmartSim API
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  SmartRedis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../smartredis.html">
   SmartRedis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sr_python_walkthrough.html">
   Python
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sr_cpp_walkthrough.html">
   C++
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sr_fortran_walkthrough.html">
   Fortran
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sr_data_structures.html">
   Data Structures
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../sr_runtime.html">
   Runtime Requirements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="smartredis_api.html">
   SmartRedis API
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../changelog.html">
   Changelog
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../code_of_conduct.html">
   Code of Conduct
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../developer.html">
   Developer
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<!-- This is an invisible pixel that we watch to see if we've scrolled. -->
<div class="sbt-scroll-pixel-helper"></div>
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            <div class="topbar-left">
                
                <label class="nav-toggle-button" for="__navigation">
                    <div class="visually-hidden">Toggle navigation</div>
                    <i class="fas fa-bars"></i>
                </label>
                
            </div>
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/api/smartsim_api.rst.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.rst</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment">
   Experiment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#settings">
   Settings
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#runsettings">
     RunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#srunsettings">
     SrunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aprunsettings">
     AprunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#jsrunsettings">
     JsrunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mpirunsettings">
     MpirunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sbatchsettings">
     SbatchSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#qsubbatchsettings">
     QsubBatchSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cobaltbatchsettings">
     CobaltBatchSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bsubbatchsettings">
     BsubBatchSettings
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#orchestrator">
   Orchestrator
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Orchestrator
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#model">
   Model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ensemble">
   Ensemble
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#machine-learning">
   Machine Learning
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tensorflow">
     TensorFlow
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pytorch">
     PyTorch
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#slurm">
   Slurm
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ray">
   Ray
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>SmartSim API</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#experiment">
   Experiment
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#settings">
   Settings
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#runsettings">
     RunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#srunsettings">
     SrunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#aprunsettings">
     AprunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#jsrunsettings">
     JsrunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mpirunsettings">
     MpirunSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#sbatchsettings">
     SbatchSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#qsubbatchsettings">
     QsubBatchSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cobaltbatchsettings">
     CobaltBatchSettings
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bsubbatchsettings">
     BsubBatchSettings
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#orchestrator">
   Orchestrator
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Orchestrator
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#model">
   Model
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ensemble">
   Ensemble
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#machine-learning">
   Machine Learning
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tensorflow">
     TensorFlow
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pytorch">
     PyTorch
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#slurm">
   Slurm
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ray">
   Ray
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <section id="smartsim-api">
<h1>SmartSim API<a class="headerlink" href="#smartsim-api" title="Permalink to this headline">¶</a></h1>
<section id="experiment">
<h2>Experiment<a class="headerlink" href="#experiment" title="Permalink to this headline">¶</a></h2>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.__init__</span></code>(name[, exp_path, launcher])</p></td>
<td><p>Initialize an Experiment instance</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.start" title="smartsim.experiment.Experiment.start"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.start</span></code></a>(*args[, block, summary])</p></td>
<td><p>Start passed instances using Experiment launcher</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.stop" title="smartsim.experiment.Experiment.stop"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.stop</span></code></a>(*args)</p></td>
<td><p>Stop specific instances launched by this <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.create_ensemble" title="smartsim.experiment.Experiment.create_ensemble"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.create_ensemble</span></code></a>(name[, params, ...])</p></td>
<td><p>Create an <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> of <code class="docutils literal notranslate"><span class="pre">Model</span></code> instances</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.create_model" title="smartsim.experiment.Experiment.create_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.create_model</span></code></a>(name, run_settings)</p></td>
<td><p>Create a general purpose <code class="docutils literal notranslate"><span class="pre">Model</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.create_database" title="smartsim.experiment.Experiment.create_database"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.create_database</span></code></a>([port, db_nodes, ...])</p></td>
<td><p>Initialize an Orchestrator database</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.create_run_settings" title="smartsim.experiment.Experiment.create_run_settings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.create_run_settings</span></code></a>(exe[, ...])</p></td>
<td><p>Create a <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> instance.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.create_batch_settings" title="smartsim.experiment.Experiment.create_batch_settings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.create_batch_settings</span></code></a>([nodes, ...])</p></td>
<td><p>Create a <code class="docutils literal notranslate"><span class="pre">BatchSettings</span></code> instance</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.generate" title="smartsim.experiment.Experiment.generate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.generate</span></code></a>(*args[, tag, overwrite])</p></td>
<td><p>Generate the file structure for an <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.poll" title="smartsim.experiment.Experiment.poll"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.poll</span></code></a>([interval, verbose])</p></td>
<td><p>Monitor jobs through logging to stdout.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.finished" title="smartsim.experiment.Experiment.finished"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.finished</span></code></a>(entity)</p></td>
<td><p>Query if a job has completed</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.get_status" title="smartsim.experiment.Experiment.get_status"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.get_status</span></code></a>(*args)</p></td>
<td><p>Query the status of launched instances</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.reconnect_orchestrator" title="smartsim.experiment.Experiment.reconnect_orchestrator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.reconnect_orchestrator</span></code></a>(checkpoint)</p></td>
<td><p>Reconnect to a running <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.experiment.Experiment.summary" title="smartsim.experiment.Experiment.summary"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Experiment.summary</span></code></a>([format])</p></td>
<td><p>Return a summary of the <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Experiment</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exp_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launcher</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'local'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Experiments are the Python user interface for SmartSim.</p>
<p>Experiment is a factory class that creates stages of a workflow
and manages their execution.</p>
<p>The instances created by an Experiment represent executable code
that is either user-specified, like the <code class="docutils literal notranslate"><span class="pre">Model</span></code> instance created
by <code class="docutils literal notranslate"><span class="pre">Experiment.create_model</span></code>, or pre-configured, like the <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code>
instance created by <code class="docutils literal notranslate"><span class="pre">Experiment.create_database</span></code>.</p>
<p>Experiment methods that accept a variable list of arguments, such as
<code class="docutils literal notranslate"><span class="pre">Experiment.start</span></code> or <code class="docutils literal notranslate"><span class="pre">Experiment.stop</span></code>, accept any number of the
instances created by the Experiment.</p>
<p>In general, the Experiment class is designed to be initialized once
and utilized throughout runtime.</p>
<p>Initialize an Experiment instance</p>
<p>With the default settings, the Experiment will use the
local launcher, which will start all Experiment created
instances on the localhost.</p>
<p>Example of initializing an Experiment with the local launcher</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_exp&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>SmartSim supports multiple launchers which also can be specified
based on the type of system you are running on.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_exp&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;slurm&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you wish your driver script and Experiment to be run across
multiple system with different schedulers (workload managers)
you can also use the <cite>auto</cite> argument to have the Experiment guess
which launcher to use based on system installed binaries and libraries</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_exp&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The Experiment path will default to the current working directory
and if the <code class="docutils literal notranslate"><span class="pre">Experiment.generate</span></code> method is called, a directory
with the Experiment name will be created to house the output
from the Experiment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name for the <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p></li>
<li><p><strong>exp_path</strong> (<em>str</em><em>, </em><em>optional</em>) – path to location of <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> directory if generated</p></li>
<li><p><strong>launcher</strong> (<em>str</em><em>, </em><em>optional</em>) – type of launcher being used, options are “slurm”, “pbs”,
“cobalt”, “lsf”, or “local”. If set to “auto”,
an attempt will be made to find an available launcher on the system.
Defaults to “local”</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.create_batch_settings">
<span class="sig-name descname"><span class="pre">create_batch_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.create_batch_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.create_batch_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <code class="docutils literal notranslate"><span class="pre">BatchSettings</span></code> instance</p>
<p>Batch settings parameterize batch workloads. The result of this
function can be passed to the <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> initialization.</p>
<p>the <cite>batch_args</cite> parameter can be used to pass in a dictionary
of additional batch command arguments that aren’t supported through
the smartsim interface</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># i.e. for Slurm</span>
<span class="n">batch_args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;distribution&quot;</span><span class="p">:</span> <span class="s2">&quot;block&quot;</span>
    <span class="s2">&quot;exclusive&quot;</span><span class="p">:</span> <span class="kc">None</span>
<span class="p">}</span>
<span class="n">bs</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">create_batch_settings</span><span class="p">(</span><span class="n">nodes</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                               <span class="n">time</span><span class="o">=</span><span class="s2">&quot;10:00:00&quot;</span><span class="p">,</span>
                               <span class="n">batch_args</span><span class="o">=</span><span class="n">batch_args</span><span class="p">)</span>
<span class="n">bs</span><span class="o">.</span><span class="n">set_account</span><span class="p">(</span><span class="s2">&quot;default&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>int</em><em>, </em><em>optional</em>) – number of nodes for batch job, defaults to 1</p></li>
<li><p><strong>time</strong> (<em>str</em><em>, </em><em>optional</em>) – length of batch job, defaults to “”</p></li>
<li><p><strong>queue</strong> (<em>str</em><em>, </em><em>optional</em>) – queue or partition (if slurm), defaults to “”</p></li>
<li><p><strong>account</strong> (<em>str</em><em>, </em><em>optional</em>) – user account name for batch system, defaults to “”</p></li>
<li><p><strong>batch_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – additional batch arguments, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a newly created BatchSettings instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>BatchSettings</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SmartSimError</strong> – if batch creation fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.create_database">
<span class="sig-name descname"><span class="pre">create_database</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hosts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ipogif0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.create_database"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.create_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize an Orchestrator database</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code> database is a key-value store based
on Redis that can be launched together with other Experiment
created instances for online data storage.</p>
<p>When launched, <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code> can be used to communicate
data between Fortran, Python, C, and C++ applications.</p>
<p>Machine Learning models in Pytorch, Tensorflow, and ONNX (i.e. scikit-learn)
can also be stored within the Orchestrator database where they
can be called remotely and executed on CPU or GPU where
the database is hosted.</p>
<p>To enable a SmartSim <code class="docutils literal notranslate"><span class="pre">Model</span></code> to communicate with the database
the workload must utilize the SmartRedis clients. For more
information on the database, and SmartRedis clients see the
documentation at www.craylabs.org</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port</strong> (<em>int</em><em>, </em><em>optional</em>) – TCP/IP port, defaults to 6379</p></li>
<li><p><strong>db_nodes</strong> (<em>int</em><em>, </em><em>optional</em>) – numver of database shards, defaults to 1</p></li>
<li><p><strong>batch</strong> (<em>bool</em><em>, </em><em>optional</em>) – Run as a batch workload, defaults to False</p></li>
<li><p><strong>hosts</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – specify hosts to launch on, defaults to None</p></li>
<li><p><strong>run_command</strong> (<em>str</em><em>, </em><em>optional</em>) – specify launch binary or detect automatically, defaults to “auto”</p></li>
<li><p><strong>interface</strong> (<em>str</em><em>, </em><em>optional</em>) – Network interface, defaults to “ipogif0”</p></li>
<li><p><strong>account</strong> (<em>str</em><em>, </em><em>optional</em>) – account to run batch on, defaults to None</p></li>
<li><p><strong>time</strong> (<em>str</em><em>, </em><em>optional</em>) – walltime for batch ‘HH:MM:SS’ format, defaults to None</p></li>
<li><p><strong>queue</strong> (<em>str</em><em>, </em><em>optional</em>) – queue to run the batch on, defaults to None</p></li>
<li><p><strong>single_cmd</strong> (<em>bool</em><em>, </em><em>optional</em>) – run all shards with one (MPMD) command, defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>SmartSimError</strong> – If detection of launcher or of run command fails</p></li>
<li><p><strong>SmartSimError</strong> – If user indicated an incompatible run command for the launcher</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Orchestrator</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#smartsim.database.Orchestrator" title="smartsim.database.Orchestrator">Orchestrator</a> or derived class</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.create_ensemble">
<span class="sig-name descname"><span class="pre">create_ensemble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replicas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perm_strategy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all_perm'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.create_ensemble"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.create_ensemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> of <code class="docutils literal notranslate"><span class="pre">Model</span></code> instances</p>
<p>Ensembles can be launched sequentially or as a batch
if using a non-local launcher. e.g. slurm</p>
<p>Ensembles require one of the following combinations
of arguments</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">run_settings</span></code> and <code class="docutils literal notranslate"><span class="pre">params</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">run_settings</span></code> and <code class="docutils literal notranslate"><span class="pre">replicas</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_settings</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_settings</span></code>, <code class="docutils literal notranslate"><span class="pre">run_settings</span></code>, and <code class="docutils literal notranslate"><span class="pre">params</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_settings</span></code>, <code class="docutils literal notranslate"><span class="pre">run_settings</span></code>, and <code class="docutils literal notranslate"><span class="pre">replicas</span></code></p></li>
</ul>
</div></blockquote>
<p>If given solely batch settings, an empty ensemble
will be created that models can be added to manually
through <code class="docutils literal notranslate"><span class="pre">Ensemble.add_model()</span></code>.
The entire ensemble will launch as one batch.</p>
<p>Provided batch and run settings, either <code class="docutils literal notranslate"><span class="pre">params</span></code>
or <code class="docutils literal notranslate"><span class="pre">replicas</span></code> must be passed and the entire ensemble
will launch as a single batch.</p>
<p>Provided solely run settings, either <code class="docutils literal notranslate"><span class="pre">params</span></code>
or <code class="docutils literal notranslate"><span class="pre">replicas</span></code> must be passed and the ensemble members
will each launch sequentially.</p>
<p>The kwargs argument can be used to pass custom input
parameters to the permutation strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the ensemble</p></li>
<li><p><strong>params</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – parameters to expand into <code class="docutils literal notranslate"><span class="pre">Model</span></code> members</p></li>
<li><p><strong>batch_settings</strong> (<em>BatchSettings</em>) – describes settings for <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> as batch workload</p></li>
<li><p><strong>run_settings</strong> (<a class="reference internal" href="#smartsim.settings.RunSettings" title="smartsim.settings.RunSettings"><em>RunSettings</em></a>) – describes how each <code class="docutils literal notranslate"><span class="pre">Model</span></code> should be executed</p></li>
<li><p><strong>replicas</strong> (<em>int</em>) – number of replicas to create</p></li>
<li><p><strong>perm_strategy</strong> (<em>str</em><em>, </em><em>optional</em>) – strategy for expanding <code class="docutils literal notranslate"><span class="pre">params</span></code> into
<code class="docutils literal notranslate"><span class="pre">Model</span></code> instances from params argument
options are “all_perm”, “stepped”, “random”
or a callable function. Default is “all_perm”.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SmartSimError</strong> – if initialization fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> instance</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#smartsim.entity.ensemble.Ensemble" title="smartsim.entity.ensemble.Ensemble">Ensemble</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.create_model">
<span class="sig-name descname"><span class="pre">create_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enable_key_prefixing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.create_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.create_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a general purpose <code class="docutils literal notranslate"><span class="pre">Model</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">Model</span></code> class is the most general encapsulation of
executable code in SmartSim. <code class="docutils literal notranslate"><span class="pre">Model</span></code> instances are named
references to pieces of a workflow that can be parameterized,
and executed.</p>
<p><code class="docutils literal notranslate"><span class="pre">Model</span></code> instances can be launched sequentially or as a batch
by adding them into an <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code>.</p>
<p>Parameters supplied in the <cite>params</cite> argument can be written into
configuration files supplied at runtime to the model through
<code class="docutils literal notranslate"><span class="pre">Model.attach_generator_files</span></code>. <cite>params</cite> can also be turned
into executable arguments by calling <code class="docutils literal notranslate"><span class="pre">Model.params_to_args</span></code></p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">Model</span></code> instances will be executed in the
current working directory if no <cite>path</cite> argument is supplied.
If a <code class="docutils literal notranslate"><span class="pre">Model</span></code> instance is passed to <code class="docutils literal notranslate"><span class="pre">Experiment.generate</span></code>,
a directory within the <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> directory will be created
to house the input and output files from the model.</p>
<p>Example initialization of a <code class="docutils literal notranslate"><span class="pre">Model</span></code> instance</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">smartsim</span> <span class="kn">import</span> <span class="n">Experiment</span>
<span class="n">run_settings</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">create_run_settings</span><span class="p">(</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;run_pytorch_model.py&quot;</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">create_model</span><span class="p">(</span><span class="s2">&quot;pytorch_model&quot;</span><span class="p">,</span> <span class="n">run_settings</span><span class="p">)</span>

<span class="c1"># adding parameters to a model</span>
<span class="n">run_settings</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">create_run_settings</span><span class="p">(</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;run_pytorch_model.py&quot;</span><span class="p">)</span>
<span class="n">train_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;batch&quot;</span><span class="p">:</span> <span class="mi">32</span><span class="p">,</span>
    <span class="s2">&quot;epoch&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="s2">&quot;lr&quot;</span><span class="p">:</span> <span class="mf">0.001</span>
<span class="p">}</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">create_model</span><span class="p">(</span><span class="s2">&quot;pytorch_model&quot;</span><span class="p">,</span> <span class="n">run_settings</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
<span class="n">model</span><span class="o">.</span><span class="n">attach_generator_files</span><span class="p">(</span><span class="n">to_configure</span><span class="o">=</span><span class="s2">&quot;./train.cfg&quot;</span><span class="p">)</span>
<span class="n">exp</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p>New in 0.4.0, <code class="docutils literal notranslate"><span class="pre">Model</span></code> instances can be co-located with an
Orchestrator database shard through <code class="docutils literal notranslate"><span class="pre">Model.colocate_db</span></code>. This
will launch a single <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code> instance on each compute
host used by the (possibly distributed) application. This is
useful for performant online inference or processing
at runtime.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the model</p></li>
<li><p><strong>run_settings</strong> (<a class="reference internal" href="#smartsim.settings.RunSettings" title="smartsim.settings.RunSettings"><em>RunSettings</em></a>) – defines how <code class="docutils literal notranslate"><span class="pre">Model</span></code> should be run,</p></li>
<li><p><strong>params</strong> (<em>dict</em><em>, </em><em>optional</em>) – model parameters for writing into configuration files</p></li>
<li><p><strong>path</strong> (<em>str</em><em>, </em><em>optional</em>) – path to where the model should be executed at runtime</p></li>
<li><p><strong>enable_key_prefixing</strong> (<em>bool</em><em>, </em><em>optional</em>) – If True, data sent to the Orchestrator
using SmartRedis from this <code class="docutils literal notranslate"><span class="pre">Model</span></code> will
be prefixed with the <code class="docutils literal notranslate"><span class="pre">Model</span></code> name.
Default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SmartSimError</strong> – if initialization fails</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the created <code class="docutils literal notranslate"><span class="pre">Model</span></code></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#smartsim.entity.model.Model" title="smartsim.entity.model.Model">Model</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.create_run_settings">
<span class="sig-name descname"><span class="pre">create_run_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exe_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.create_run_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.create_run_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> instance.</p>
<p>run_command=”auto” will attempt to automatically
match a run command on the system with a RunSettings
class in SmartSim. If found, the class corresponding
to that run_command will be created and returned.</p>
<p>if the local launcher is being used, auto detection will
be turned off.</p>
<p>If a recognized run command is passed, the <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code>
instance will be a child class such as <code class="docutils literal notranslate"><span class="pre">SrunSettings</span></code></p>
<p>If not supported by smartsim, the base <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> class
will be created and returned with the specified run_command and run_args
will be evaluated literally.</p>
<dl class="simple">
<dt>Run Commands with implemented helper classes:</dt><dd><ul class="simple">
<li><p>aprun (ALPS)</p></li>
<li><p>srun (SLURM)</p></li>
<li><p>mpirun (OpenMPI)</p></li>
<li><p>jsrun (LSF)</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>run_command</strong> (<em>str</em>) – command to run the executable</p></li>
<li><p><strong>exe</strong> (<em>str</em>) – executable to run</p></li>
<li><p><strong>exe_args</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – arguments to pass to the executable</p></li>
<li><p><strong>run_args</strong> (<em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – arguments to pass to the <code class="docutils literal notranslate"><span class="pre">run_command</span></code></p></li>
<li><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – environment variables to pass to the executable</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the created <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#smartsim.settings.RunSettings" title="smartsim.settings.RunSettings">RunSettings</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.finished">
<span class="sig-name descname"><span class="pre">finished</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.finished"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.finished" title="Permalink to this definition">¶</a></dt>
<dd><p>Query if a job has completed</p>
<p>An instance of <code class="docutils literal notranslate"><span class="pre">Model</span></code> or <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> can be passed
as an argument.</p>
<p>Passing <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code> will return an error as a
database deployment is never finished until stopped
by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entity</strong> (<a class="reference internal" href="#smartsim.entity.model.Model" title="smartsim.entity.model.Model"><em>Model</em></a><em> | </em><a class="reference internal" href="#smartsim.entity.ensemble.Ensemble" title="smartsim.entity.ensemble.Ensemble"><em>Ensemble</em></a>) – object launched by this <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if job has completed, False otherwise</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SmartSimError</strong> – if entity has not been launched
by this <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.generate">
<span class="sig-name descname"><span class="pre">generate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.generate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.generate" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate the file structure for an <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Experiment.generate</span></code> creates directories for each instance
passed to organize Experiments that launch many instances</p>
<p>If files or directories are attached to <code class="docutils literal notranslate"><span class="pre">Model</span></code> objects
using <code class="docutils literal notranslate"><span class="pre">Model.attach_generator_files()</span></code>, those files or
directories will be symlinked, copied, or configured and
written into the created directory for that instance.</p>
<p>Instances of <code class="docutils literal notranslate"><span class="pre">Model</span></code>, <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> and <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code>
can all be passed as arguments to the generate method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tag</strong> (<em>str</em><em>, </em><em>optional</em>) – tag used in <cite>to_configure</cite> generator files</p></li>
<li><p><strong>overwrite</strong> (<em>bool</em><em>, </em><em>optional</em>) – overwrite existing folders and contents,
defaults to False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.get_status">
<span class="sig-name descname"><span class="pre">get_status</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.get_status"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.get_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Query the status of launched instances</p>
<p>Return a smartsim.status string representing
the status of the launched instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p>As with an Experiment method, multiple instance of
varying types can be passed to and all statuses will
be returned at once.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">statuses</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">ensemble</span><span class="p">,</span> <span class="n">orchestrator</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">all</span><span class="p">([</span><span class="n">status</span> <span class="o">==</span> <span class="n">smartsim</span><span class="o">.</span><span class="n">status</span><span class="o">.</span><span class="n">STATUS_COMPLETED</span> <span class="k">for</span> <span class="n">status</span> <span class="ow">in</span> <span class="n">statuses</span><span class="p">])</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>status of the instances passed as arguments</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>SmartSimError</strong> – if status retrieval fails</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.poll">
<span class="sig-name descname"><span class="pre">poll</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.poll"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.poll" title="Permalink to this definition">¶</a></dt>
<dd><p>Monitor jobs through logging to stdout.</p>
<p>This method should only be used if jobs were launched
with <code class="docutils literal notranslate"><span class="pre">Experiment.start(block=False)</span></code></p>
<p>The internal specified will control how often the
logging is performed, not how often the polling occurs.
By default, internal polling is set to every second for
local launcher jobs and every 10 seconds for all other
launchers.</p>
<p>If internal polling needs to be slower or faster based on
system or site standards, set the <code class="docutils literal notranslate"><span class="pre">SMARTSIM_JM_INTERNAL</span></code>
environment variable to control the internal polling interval
for SmartSim.</p>
<p>For more verbose logging output, the <code class="docutils literal notranslate"><span class="pre">SMARTSIM_LOG_LEVEL</span></code>
environment variable can be set to <cite>debug</cite></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interval</strong> (<em>int</em><em>, </em><em>optional</em>) – frequency (in seconds) of logging to stdout,
defaults to 10 seconds</p></li>
<li><p><strong>verbose</strong> (<em>bool</em><em>, </em><em>optional</em>) – set verbosity, defaults to True</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SmartSimError</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.reconnect_orchestrator">
<span class="sig-name descname"><span class="pre">reconnect_orchestrator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">checkpoint</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.reconnect_orchestrator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.reconnect_orchestrator" title="Permalink to this definition">¶</a></dt>
<dd><p>Reconnect to a running <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code></p>
<p>This method can be used to connect to a <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code> deployment
that was launched by a previous <code class="docutils literal notranslate"><span class="pre">Experiment</span></code>. This can be
helpful in the case where separate runs of an <code class="docutils literal notranslate"><span class="pre">Experiment</span></code>
wish to use the same <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code> instance currently
running on a system.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>checkpoint</strong> (<em>str</em>) – the <cite>smartsim_db.dat</cite> file created
when an <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code> is launched</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summary</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.start"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Start passed instances using Experiment launcher</p>
<p>Any instance <code class="docutils literal notranslate"><span class="pre">Model</span></code>, <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> or <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code>
instance created by the Experiment can be passed as
an argument to the start method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;my_exp&quot;</span><span class="p">,</span> <span class="n">launcher</span><span class="o">=</span><span class="s2">&quot;slurm&quot;</span><span class="p">)</span>
<span class="n">settings</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">create_run_settings</span><span class="p">(</span><span class="n">exe</span><span class="o">=</span><span class="s2">&quot;./path/to/binary&quot;</span><span class="p">)</span>
<span class="n">model</span> <span class="o">=</span> <span class="n">exp</span><span class="o">.</span><span class="n">create_model</span><span class="p">(</span><span class="s2">&quot;my_model&quot;</span><span class="p">,</span> <span class="n">settings</span><span class="p">)</span>
<span class="n">exp</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p>Multiple instance can also be passed to the start method
at once no matter which type of instance they are. These will
all be launched together.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">model_1</span><span class="p">,</span> <span class="n">model_2</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">ensemble</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1"># alternatively</span>
<span class="n">stage_1</span> <span class="o">=</span> <span class="p">[</span><span class="n">model_1</span><span class="p">,</span> <span class="n">model_2</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">ensemble</span><span class="p">]</span>
<span class="n">exp</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="o">*</span><span class="n">stage_1</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>If <cite>block==True</cite> the Experiment will poll the launched instances
at runtime until all non-database jobs have completed. Database
jobs <em>must</em> be killed by the user by passing them to
<code class="docutils literal notranslate"><span class="pre">Experiment.stop</span></code>. This allows for multiple stages of a workflow
to produce to and consume from the same Orchestrator database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block</strong> (<em>bool</em><em>, </em><em>optional</em>) – block execution until all non-database
jobs are finished, defaults to True</p></li>
<li><p><strong>summary</strong> (<em>bool</em><em>, </em><em>optional</em>) – print a launch summary prior to launch,
defaults to False</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.stop"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop specific instances launched by this <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p>
<p>Instances of <code class="docutils literal notranslate"><span class="pre">Model</span></code>, <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> and <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code>
can all be passed as arguments to the stop method.</p>
<p>Whichever launcher was specified at Experiment initialization
will be used to stop the instance. For example, which using
the slurm launcher, this equates to running <cite>scancel</cite> on the
instance.</p>
<p>Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">exp</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="c1"># multiple</span>
<span class="n">exp</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">model_1</span><span class="p">,</span> <span class="n">model_2</span><span class="p">,</span> <span class="n">db</span><span class="p">,</span> <span class="n">ensemble</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>TypeError</strong> – if wrong type</p></li>
<li><p><strong>SmartSimError</strong> – if stop request fails</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.experiment.Experiment.summary">
<span class="sig-name descname"><span class="pre">summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">format</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'github'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/experiment.html#Experiment.summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.experiment.Experiment.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a summary of the <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p>
<p>The summary will show each instance that has been
launched and completed in this <code class="docutils literal notranslate"><span class="pre">Experiment</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>format</strong> (<em>str</em><em>, </em><em>optional</em>) – the style in which the summary table is formatted,
for a full list of styles see:
<a class="reference external" href="https://github.com/astanin/python-tabulate#table-format">https://github.com/astanin/python-tabulate#table-format</a>,
defaults to “github”</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>tabulate string of <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> history</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="settings">
<h2>Settings<a class="headerlink" href="#settings" title="Permalink to this headline">¶</a></h2>
<p>Settings are provided to <code class="docutils literal notranslate"><span class="pre">Model</span></code> and <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> objects
to provide parameters for how a job should be executed. Some
are specifically meant for certain launchers like <code class="docutils literal notranslate"><span class="pre">SbatchSettings</span></code>
is solely meant for system using Slurm as a workload manager.
<code class="docutils literal notranslate"><span class="pre">MpirunSettings</span></code> for OpenMPI based jobs is supported by Slurm,
PBSPro, and Cobalt.</p>
<p>Types of Settings:</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.RunSettings" title="smartsim.settings.RunSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RunSettings</span></code></a>(exe[, exe_args, run_command, ...])</p></td>
<td><p>Run parameters for a <code class="docutils literal notranslate"><span class="pre">Model</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings" title="smartsim.settings.SrunSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings</span></code></a>(exe[, exe_args, run_args, ...])</p></td>
<td><p>Initialize run parameters for a slurm job with <code class="docutils literal notranslate"><span class="pre">srun</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings" title="smartsim.settings.AprunSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings</span></code></a>(exe[, exe_args, run_args, ...])</p></td>
<td><p>Settings to run job with <code class="docutils literal notranslate"><span class="pre">aprun</span></code> command</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings" title="smartsim.settings.MpirunSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings</span></code></a>(exe[, exe_args, run_args, ...])</p></td>
<td><p>Settings to run job with <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> command (OpenMPI)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings" title="smartsim.settings.JsrunSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings</span></code></a>(exe[, exe_args, run_args, ...])</p></td>
<td><p>Settings to run job with <code class="docutils literal notranslate"><span class="pre">jsrun</span></code> command</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings" title="smartsim.settings.SbatchSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings</span></code></a>([nodes, time, account, ...])</p></td>
<td><p>Specify run parameters for a Slurm batch job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings" title="smartsim.settings.QsubBatchSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings</span></code></a>([nodes, ncpus, time, ...])</p></td>
<td><p>Specify <code class="docutils literal notranslate"><span class="pre">qsub</span></code> batch parameters for a job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.CobaltBatchSettings" title="smartsim.settings.CobaltBatchSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CobaltBatchSettings</span></code></a>([nodes, time, queue, ...])</p></td>
<td><p>Specify settings for a Cobalt <code class="docutils literal notranslate"><span class="pre">qsub</span></code> batch launch</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings" title="smartsim.settings.BsubBatchSettings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings</span></code></a>([nodes, time, project, ...])</p></td>
<td><p>Specify <code class="docutils literal notranslate"><span class="pre">bsub</span></code> batch parameters for a job</p></td>
</tr>
</tbody>
</table>
<section id="runsettings">
<h3>RunSettings<a class="headerlink" href="#runsettings" title="Permalink to this headline">¶</a></h3>
<p id="rs-api">When running SmartSim on laptops and single node workstations,
the base <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> object is used to parameterize jobs.
<code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> include a <code class="docutils literal notranslate"><span class="pre">run_command</span></code> parameter for local
launches that utilize a parallel launch binary like
<code class="docutils literal notranslate"><span class="pre">mpirun</span></code>, <code class="docutils literal notranslate"><span class="pre">mpiexec</span></code>, and others.</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.RunSettings.add_exe_args" title="smartsim.settings.RunSettings.add_exe_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RunSettings.add_exe_args</span></code></a>(args)</p></td>
<td><p>Add executable arguments to executable</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.RunSettings.update_env" title="smartsim.settings.RunSettings.update_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">RunSettings.update_env</span></code></a>(env_vars)</p></td>
<td><p>Update the job environment variables</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RunSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exe_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/base.html#RunSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.RunSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Run parameters for a <code class="docutils literal notranslate"><span class="pre">Model</span></code></p>
<p>The base <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> class should only be used with the <cite>local</cite>
launcher on single node, workstations, or laptops.</p>
<p>If no <code class="docutils literal notranslate"><span class="pre">run_command</span></code> is specified, the executable will be launched
locally.</p>
<p><code class="docutils literal notranslate"><span class="pre">run_args</span></code> passed as a dict will be interpreted literally for
local <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code> and added directly to the <code class="docutils literal notranslate"><span class="pre">run_command</span></code>
e.g. run_args = {“-np”: 2} will be “-np 2”</p>
<p>Example initialization</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">rs</span> <span class="o">=</span> <span class="n">RunSettings</span><span class="p">(</span><span class="s2">&quot;echo&quot;</span><span class="p">,</span> <span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;mpirun&quot;</span><span class="p">,</span> <span class="n">run_args</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;-np&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span><span class="p">})</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exe</strong> (<em>str</em>) – executable to run</p></li>
<li><p><strong>exe_args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – executable arguments, defaults to None</p></li>
<li><p><strong>run_command</strong> (<em>str</em><em>, </em><em>optional</em>) – launch binary (e.g. “srun”), defaults to empty str</p></li>
<li><p><strong>run_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – arguments for run command (e.g. <cite>-np</cite> for <cite>mpiexec</cite>), defaults to None</p></li>
<li><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – environment vars to launch job with, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings.add_exe_args">
<span class="sig-name descname"><span class="pre">add_exe_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/base.html#RunSettings.add_exe_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.RunSettings.add_exe_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Add executable arguments to executable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – executable arguments</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if exe args are not strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings.format_run_args">
<span class="sig-name descname"><span class="pre">format_run_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/base.html#RunSettings.format_run_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.RunSettings.format_run_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Return formatted run arguments</p>
<p>For <code class="docutils literal notranslate"><span class="pre">RunSettings</span></code>, the run arguments are passed
literally with no formatting.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list run arguments for these settings</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings.run_command">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_command</span></span><a class="headerlink" href="#smartsim.settings.RunSettings.run_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the launch binary used to launch the executable</p>
<p>Attempt to expand the path to the executable if possible</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>launch binary e.g. mpiexec</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings.set_cpus_per_task">
<span class="sig-name descname"><span class="pre">set_cpus_per_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/base.html#RunSettings.set_cpus_per_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.RunSettings.set_cpus_per_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of cpus per task</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cpus_per_task</strong> (<em>int</em>) – number of cpus per task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/base.html#RunSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.RunSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hostlist for this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to launch on</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings.set_tasks">
<span class="sig-name descname"><span class="pre">set_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/base.html#RunSettings.set_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.RunSettings.set_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks to launch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks</strong> (<em>int</em>) – number of tasks to launch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings.set_tasks_per_node">
<span class="sig-name descname"><span class="pre">set_tasks_per_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/base.html#RunSettings.set_tasks_per_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.RunSettings.set_tasks_per_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks per node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks_per_node</strong> (<em>int</em>) – number of tasks to launch per node</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.RunSettings.update_env">
<span class="sig-name descname"><span class="pre">update_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_vars</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/base.html#RunSettings.update_env"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.RunSettings.update_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the job environment variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – environment variables to update or add</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="srunsettings">
<h3>SrunSettings<a class="headerlink" href="#srunsettings" title="Permalink to this headline">¶</a></h3>
<p id="srun-api"><code class="docutils literal notranslate"><span class="pre">SrunSettings</span></code> can be used for running on existing allocations,
running jobs in interactive allocations, and for adding srun
steps to a batch.</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.set_nodes" title="smartsim.settings.SrunSettings.set_nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.set_nodes</span></code></a>(nodes)</p></td>
<td><p>Set the number of nodes</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.set_tasks" title="smartsim.settings.SrunSettings.set_tasks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.set_tasks</span></code></a>(tasks)</p></td>
<td><p>Set the number of tasks for this job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.set_tasks_per_node" title="smartsim.settings.SrunSettings.set_tasks_per_node"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.set_tasks_per_node</span></code></a>(tasks_per_node)</p></td>
<td><p>Set the number of tasks for this job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.set_walltime" title="smartsim.settings.SrunSettings.set_walltime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.set_walltime</span></code></a>(walltime)</p></td>
<td><p>Set the walltime of the job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.set_hostlist" title="smartsim.settings.SrunSettings.set_hostlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.set_hostlist</span></code></a>(host_list)</p></td>
<td><p>Specify the hostlist for this job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.set_excluded_hosts" title="smartsim.settings.SrunSettings.set_excluded_hosts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.set_excluded_hosts</span></code></a>(host_list)</p></td>
<td><p>Specify a list of hosts to exclude for launching this job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.set_cpus_per_task" title="smartsim.settings.SrunSettings.set_cpus_per_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.set_cpus_per_task</span></code></a>(cpus_per_task)</p></td>
<td><p>Set the number of cpus to use per task</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.add_exe_args" title="smartsim.settings.SrunSettings.add_exe_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.add_exe_args</span></code></a>(args)</p></td>
<td><p>Add executable arguments to executable</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.format_run_args" title="smartsim.settings.SrunSettings.format_run_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.format_run_args</span></code></a>()</p></td>
<td><p>return a list of slurm formatted run arguments</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.format_env_vars" title="smartsim.settings.SrunSettings.format_env_vars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.format_env_vars</span></code></a>()</p></td>
<td><p>Build environment variable string for Slurm</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SrunSettings.update_env" title="smartsim.settings.SrunSettings.update_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SrunSettings.update_env</span></code></a>(env_vars)</p></td>
<td><p>Update the job environment variables</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SrunSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exe_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alloc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize run parameters for a slurm job with <code class="docutils literal notranslate"><span class="pre">srun</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">SrunSettings</span></code> should only be used on Slurm based systems.</p>
<p>If an allocation is specified, the instance receiving these run
parameters will launch on that allocation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exe</strong> (<em>str</em>) – executable to run</p></li>
<li><p><strong>exe_args</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>str</em><em>, </em><em>optional</em>) – executable arguments, defaults to Noe</p></li>
<li><p><strong>run_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em> | </em><em>None</em><em>]</em><em>, </em><em>optional</em>) – srun arguments without dashes, defaults to None</p></li>
<li><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – environment variables for job, defaults to None</p></li>
<li><p><strong>alloc</strong> (<em>str</em><em>, </em><em>optional</em>) – allocation ID if running on existing alloc, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.add_exe_args">
<span class="sig-name descname"><span class="pre">add_exe_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.SrunSettings.add_exe_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Add executable arguments to executable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – executable arguments</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if exe args are not strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.format_env_vars">
<span class="sig-name descname"><span class="pre">format_env_vars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.format_env_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.format_env_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Build environment variable string for Slurm</p>
<p>Slurm takes exports in comma separated lists
the list starts with all as to not disturb the rest of the environment
for more information on this, see the slurm documentation for srun</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the formatted string of environment variables</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.format_run_args">
<span class="sig-name descname"><span class="pre">format_run_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.format_run_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.format_run_args" title="Permalink to this definition">¶</a></dt>
<dd><p>return a list of slurm formatted run arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of slurm arguments for these settings</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.make_mpmd">
<span class="sig-name descname"><span class="pre">make_mpmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">srun_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.make_mpmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.make_mpmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a mpmd workload by combining two <code class="docutils literal notranslate"><span class="pre">srun</span></code> commands</p>
<p>This connects the two settings to be executed with a single
Model instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>srun_settings</strong> (<a class="reference internal" href="#smartsim.settings.SrunSettings" title="smartsim.settings.SrunSettings"><em>SrunSettings</em></a>) – SrunSettings instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.run_command">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_command</span></span><a class="headerlink" href="#smartsim.settings.SrunSettings.run_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the launch binary used to launch the executable</p>
<p>Attempt to expand the path to the executable if possible</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>launch binary e.g. mpiexec</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.set_cpus_per_task">
<span class="sig-name descname"><span class="pre">set_cpus_per_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.set_cpus_per_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.set_cpus_per_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of cpus to use per task</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--cpus-per-task</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_cpus</strong> (<em>int</em>) – number of cpus to use per task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.set_excluded_hosts">
<span class="sig-name descname"><span class="pre">set_excluded_hosts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.set_excluded_hosts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.set_excluded_hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a list of hosts to exclude for launching this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to exclude</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hostlist for this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to launch on</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if not str or list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.set_nodes">
<span class="sig-name descname"><span class="pre">set_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.set_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.set_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of nodes</p>
<p>Effectively this is setting: <code class="docutils literal notranslate"><span class="pre">srun</span> <span class="pre">--nodes</span> <span class="pre">&lt;num_nodes&gt;</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nodes</strong> (<em>int</em>) – number of nodes to run with</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.set_tasks">
<span class="sig-name descname"><span class="pre">set_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.set_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.set_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks for this job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--ntasks</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks</strong> (<em>int</em>) – number of tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.set_tasks_per_node">
<span class="sig-name descname"><span class="pre">set_tasks_per_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.set_tasks_per_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.set_tasks_per_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks for this job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--ntasks-per-node</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks_per_node</strong> (<em>int</em>) – number of tasks per node</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.set_walltime">
<span class="sig-name descname"><span class="pre">set_walltime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walltime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SrunSettings.set_walltime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SrunSettings.set_walltime" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the walltime of the job</p>
<p>format = “HH:MM:SS”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>walltime</strong> (<em>str</em>) – wall time</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SrunSettings.update_env">
<span class="sig-name descname"><span class="pre">update_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_vars</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.SrunSettings.update_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the job environment variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – environment variables to update or add</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="aprunsettings">
<h3>AprunSettings<a class="headerlink" href="#aprunsettings" title="Permalink to this headline">¶</a></h3>
<p id="aprun-api"><code class="docutils literal notranslate"><span class="pre">AprunSettings</span></code> can be used on any system that supports the
Cray ALPS layer. SmartSim supports using <code class="docutils literal notranslate"><span class="pre">AprunSettings</span></code>
on PBSPro and Cobalt WLM systems.</p>
<p><code class="docutils literal notranslate"><span class="pre">AprunSettings</span></code> can be used in interactive session (on allocation)
and within batch launches (e.g., <code class="docutils literal notranslate"><span class="pre">QsubBatchSettings</span></code>)</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.set_cpus_per_task" title="smartsim.settings.AprunSettings.set_cpus_per_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.set_cpus_per_task</span></code></a>(cpus_per_task)</p></td>
<td><p>Set the number of cpus to use per task</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.set_hostlist" title="smartsim.settings.AprunSettings.set_hostlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.set_hostlist</span></code></a>(host_list)</p></td>
<td><p>Specify the hostlist for this job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.set_tasks" title="smartsim.settings.AprunSettings.set_tasks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.set_tasks</span></code></a>(tasks)</p></td>
<td><p>Set the number of tasks for this job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.set_tasks_per_node" title="smartsim.settings.AprunSettings.set_tasks_per_node"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.set_tasks_per_node</span></code></a>(tasks_per_node)</p></td>
<td><p>Set the number of tasks for this job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.make_mpmd" title="smartsim.settings.AprunSettings.make_mpmd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.make_mpmd</span></code></a>(aprun_settings)</p></td>
<td><p>Make job an MPMD job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.add_exe_args" title="smartsim.settings.AprunSettings.add_exe_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.add_exe_args</span></code></a>(args)</p></td>
<td><p>Add executable arguments to executable</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.format_run_args" title="smartsim.settings.AprunSettings.format_run_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.format_run_args</span></code></a>()</p></td>
<td><p>Return a list of ALPS formatted run arguments</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.format_env_vars" title="smartsim.settings.AprunSettings.format_env_vars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.format_env_vars</span></code></a>()</p></td>
<td><p>Format the environment variables for aprun</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.AprunSettings.update_env" title="smartsim.settings.AprunSettings.update_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AprunSettings.update_env</span></code></a>(env_vars)</p></td>
<td><p>Update the job environment variables</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">AprunSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exe_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings to run job with <code class="docutils literal notranslate"><span class="pre">aprun</span></code> command</p>
<p><code class="docutils literal notranslate"><span class="pre">AprunSettings</span></code> can be used for both the <cite>pbs</cite> and <cite>cobalt</cite>
launchers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exe</strong> (<em>str</em>) – executable</p></li>
<li><p><strong>exe_args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – executable arguments, defaults to None</p></li>
<li><p><strong>run_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – arguments for run command, defaults to None</p></li>
<li><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – environment vars to launch job with, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.add_exe_args">
<span class="sig-name descname"><span class="pre">add_exe_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.AprunSettings.add_exe_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Add executable arguments to executable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – executable arguments</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if exe args are not strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.format_env_vars">
<span class="sig-name descname"><span class="pre">format_env_vars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.format_env_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.format_env_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the environment variables for aprun</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of env vars</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.format_run_args">
<span class="sig-name descname"><span class="pre">format_run_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.format_run_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.format_run_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of ALPS formatted run arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of ALPS arguments for these settings</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.make_mpmd">
<span class="sig-name descname"><span class="pre">make_mpmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aprun_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.make_mpmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.make_mpmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Make job an MPMD job</p>
<p>This method combines two <code class="docutils literal notranslate"><span class="pre">AprunSettings</span></code>
into a single MPMD command joined with ‘:’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>aprun_settings</strong> (<a class="reference internal" href="#smartsim.settings.AprunSettings" title="smartsim.settings.AprunSettings"><em>AprunSettings</em></a>) – <code class="docutils literal notranslate"><span class="pre">AprunSettings</span></code> instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.run_command">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_command</span></span><a class="headerlink" href="#smartsim.settings.AprunSettings.run_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the launch binary used to launch the executable</p>
<p>Attempt to expand the path to the executable if possible</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>launch binary e.g. mpiexec</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.set_cpus_per_task">
<span class="sig-name descname"><span class="pre">set_cpus_per_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.set_cpus_per_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.set_cpus_per_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of cpus to use per task</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--cpus-per-pe</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cpus_per_task</strong> (<em>int</em>) – number of cpus to use per task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.set_excluded_hosts">
<span class="sig-name descname"><span class="pre">set_excluded_hosts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.set_excluded_hosts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.set_excluded_hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a list of hosts to exclude for launching this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to exclude</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hostlist for this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to launch on</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if not str or list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.set_tasks">
<span class="sig-name descname"><span class="pre">set_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.set_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.set_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks for this job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--pes</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks</strong> (<em>int</em>) – number of tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.set_tasks_per_node">
<span class="sig-name descname"><span class="pre">set_tasks_per_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.set_tasks_per_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.set_tasks_per_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks for this job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--pes-per-node</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks_per_node</strong> (<em>int</em>) – number of tasks per node</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.set_walltime">
<span class="sig-name descname"><span class="pre">set_walltime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walltime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/alpsSettings.html#AprunSettings.set_walltime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.AprunSettings.set_walltime" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the walltime of the job</p>
<p>format = “HH:MM:SS”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>walltime</strong> (<em>str</em>) – wall time</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.AprunSettings.update_env">
<span class="sig-name descname"><span class="pre">update_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_vars</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.AprunSettings.update_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the job environment variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – environment variables to update or add</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="jsrunsettings">
<h3>JsrunSettings<a class="headerlink" href="#jsrunsettings" title="Permalink to this headline">¶</a></h3>
<p id="jsrun-api"><code class="docutils literal notranslate"><span class="pre">JsrunSettings</span></code> can be used on any system that supports the
IBM LSF launcher.</p>
<p><code class="docutils literal notranslate"><span class="pre">JsrunSettings</span></code> can be used in interactive session (on allocation)
and within batch launches (i.e. <code class="docutils literal notranslate"><span class="pre">BsubBatchSettings</span></code>)</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_num_rs" title="smartsim.settings.JsrunSettings.set_num_rs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_num_rs</span></code></a>(num_rs)</p></td>
<td><p>Set the number of resource sets to use</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_cpus_per_rs" title="smartsim.settings.JsrunSettings.set_cpus_per_rs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_cpus_per_rs</span></code></a>(cpus_per_rs)</p></td>
<td><p>Set the number of cpus to use per resource set</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_gpus_per_rs" title="smartsim.settings.JsrunSettings.set_gpus_per_rs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_gpus_per_rs</span></code></a>(gpus_per_rs)</p></td>
<td><p>Set the number of gpus to use per resource set</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_rs_per_host" title="smartsim.settings.JsrunSettings.set_rs_per_host"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_rs_per_host</span></code></a>(rs_per_host)</p></td>
<td><p>Set the number of resource sets to use per host</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_tasks" title="smartsim.settings.JsrunSettings.set_tasks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_tasks</span></code></a>(tasks)</p></td>
<td><p>Set the number of tasks for this job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_tasks_per_rs" title="smartsim.settings.JsrunSettings.set_tasks_per_rs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_tasks_per_rs</span></code></a>(tasks_per_rs)</p></td>
<td><p>Set the number of tasks per resource set</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_binding" title="smartsim.settings.JsrunSettings.set_binding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_binding</span></code></a>(binding)</p></td>
<td><p>Set binding</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.make_mpmd" title="smartsim.settings.JsrunSettings.make_mpmd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.make_mpmd</span></code></a>([jsrun_settings])</p></td>
<td><p>Make step an MPMD (or SPMD) job.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_mpmd_preamble" title="smartsim.settings.JsrunSettings.set_mpmd_preamble"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_mpmd_preamble</span></code></a>(preamble_lines)</p></td>
<td><p>Set preamble used in ERF file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.update_env" title="smartsim.settings.JsrunSettings.update_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.update_env</span></code></a>(env_vars)</p></td>
<td><p>Update the job environment variables</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.set_erf_sets" title="smartsim.settings.JsrunSettings.set_erf_sets"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.set_erf_sets</span></code></a>(erf_sets)</p></td>
<td><p>Set resource sets used for ERF (SPMD or MPMD) steps.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.format_env_vars" title="smartsim.settings.JsrunSettings.format_env_vars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.format_env_vars</span></code></a>()</p></td>
<td><p>Format environment variables.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.JsrunSettings.format_run_args" title="smartsim.settings.JsrunSettings.format_run_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">JsrunSettings.format_run_args</span></code></a>()</p></td>
<td><p>Return a list of LSF formatted run arguments</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">JsrunSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exe_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings to run job with <code class="docutils literal notranslate"><span class="pre">jsrun</span></code> command</p>
<p><code class="docutils literal notranslate"><span class="pre">JsrunSettings</span></code> should only be used on LSF-based systems.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exe</strong> (<em>str</em>) – executable</p></li>
<li><p><strong>exe_args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – executable arguments, defaults to None</p></li>
<li><p><strong>run_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – arguments for run command, defaults to None</p></li>
<li><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – environment vars to launch job with, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.add_exe_args">
<span class="sig-name descname"><span class="pre">add_exe_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.JsrunSettings.add_exe_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Add executable arguments to executable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – executable arguments</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if exe args are not strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.format_env_vars">
<span class="sig-name descname"><span class="pre">format_env_vars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.format_env_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.format_env_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Format environment variables. Each variable needs
to be passed with <code class="docutils literal notranslate"><span class="pre">--env</span></code>. If a variable is set to <code class="docutils literal notranslate"><span class="pre">None</span></code>,
its value is propagated from the current environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>formatted list of strings to export variables</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.format_run_args">
<span class="sig-name descname"><span class="pre">format_run_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.format_run_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.format_run_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of LSF formatted run arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of LSF arguments for these settings</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.make_mpmd">
<span class="sig-name descname"><span class="pre">make_mpmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">jsrun_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.make_mpmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.make_mpmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Make step an MPMD (or SPMD) job.</p>
<p>This method will activate job execution through an ERF file.</p>
<p>Optionally, this method adds an instance of <code class="docutils literal notranslate"><span class="pre">JsrunSettings</span></code> to
the list of settings to be launched in the same ERF file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>aprun_settings</strong> (<a class="reference internal" href="#smartsim.settings.JsrunSettings" title="smartsim.settings.JsrunSettings"><em>JsrunSettings</em></a><em>, </em><em>optional</em>) – <code class="docutils literal notranslate"><span class="pre">JsrunSettings</span></code> instance, defaults to None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.run_command">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_command</span></span><a class="headerlink" href="#smartsim.settings.JsrunSettings.run_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the launch binary used to launch the executable</p>
<p>Attempt to expand the path to the executable if possible</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>launch binary e.g. mpiexec</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_binding">
<span class="sig-name descname"><span class="pre">set_binding</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">binding</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_binding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_binding" title="Permalink to this definition">¶</a></dt>
<dd><p>Set binding</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--bind</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>binding</strong> (<em>str</em>) – Binding, e.g. <cite>packed:21</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_cpus_per_rs">
<span class="sig-name descname"><span class="pre">set_cpus_per_rs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cpus_per_rs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_cpus_per_rs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_cpus_per_rs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of cpus to use per resource set</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--cpu_per_rs</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cpus_per_rs</strong> (<em>int</em><em> or </em><em>str</em>) – number of cpus to use per resource set or ALL_CPUS</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_cpus_per_task">
<span class="sig-name descname"><span class="pre">set_cpus_per_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_cpus_per_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_cpus_per_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of cpus per tasks.</p>
<p>This function is an alias for <cite>set_cpus_per_rs</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cpus_per_task</strong> (<em>int</em>) – number of cpus per resource set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_erf_sets">
<span class="sig-name descname"><span class="pre">set_erf_sets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">erf_sets</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_erf_sets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_erf_sets" title="Permalink to this definition">¶</a></dt>
<dd><p>Set resource sets used for ERF (SPMD or MPMD) steps.</p>
<p><code class="docutils literal notranslate"><span class="pre">erf_sets</span></code> is a dictionary used to fill the ERF
line representing these settings, e.g.
<cite>{“host”: “1”, “cpu”: “{0:21}, {21:21}”, “gpu”: “*”}</cite>
can be used to specify rank (or rank_count), hosts, cpus, gpus,
and memory.
The key <cite>rank</cite> is used to give specific ranks, as in
<cite>{“rank”: “1, 2, 5”}</cite>, while the key <cite>rank_count</cite> is used to specify
the count only, as in <cite>{“rank_count”: “3”}</cite>. If both are specified,
only <cite>rank</cite> is used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>hosts</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – dictionary of resources</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_gpus_per_rs">
<span class="sig-name descname"><span class="pre">set_gpus_per_rs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gpus_per_rs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_gpus_per_rs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_gpus_per_rs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of gpus to use per resource set</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--gpu_per_rs</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>gpus_per_rs</strong> (<em>int</em><em> or </em><em>str</em>) – number of gpus to use per resource set or ALL_GPUS</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>This function has no effect.</p>
<p>This function is only available to unify LSFSettings
to other WLM settings classes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_individual_output">
<span class="sig-name descname"><span class="pre">set_individual_output</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">suffix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_individual_output"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_individual_output" title="Permalink to this definition">¶</a></dt>
<dd><p>Set individual std output.</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--stdio_mode</span> <span class="pre">individual</span></code>
and inserts the suffix into the output name. The resulting
output name will be <code class="docutils literal notranslate"><span class="pre">self.name</span> <span class="pre">+</span> <span class="pre">suffix</span> <span class="pre">+</span> <span class="pre">.out</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>suffix</strong> (<em>str</em><em>, </em><em>optional</em>) – Optional suffix to add to output file names,
it can contain <cite>%j</cite>, <cite>%h</cite>, <cite>%p</cite>, or <cite>%t</cite>,
as specified by <cite>jsrun</cite> options.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_mpmd_preamble">
<span class="sig-name descname"><span class="pre">set_mpmd_preamble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">preamble_lines</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_mpmd_preamble"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_mpmd_preamble" title="Permalink to this definition">¶</a></dt>
<dd><p>Set preamble used in ERF file. Typical lines include
<cite>oversubscribe-cpu : allow</cite> or <cite>overlapping-rs : allow</cite>.
Can be used to set <cite>launch_distribution</cite>. If it is not present,
it will be inferred from the settings, or set to <cite>packed</cite> by
default.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>preamble_lines</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – lines to put at the beginning of the ERF
file.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_num_rs">
<span class="sig-name descname"><span class="pre">set_num_rs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_rs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_num_rs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_num_rs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of resource sets to use</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--nrs</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_rs</strong> (<em>int</em><em> or </em><em>str</em>) – Number of resource sets or <cite>ALL_HOSTS</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_rs_per_host">
<span class="sig-name descname"><span class="pre">set_rs_per_host</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rs_per_host</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_rs_per_host"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_rs_per_host" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of resource sets to use per host</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--rs_per_host</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>rs_per_host</strong> (<em>int</em>) – number of resource sets to use per host</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_tasks">
<span class="sig-name descname"><span class="pre">set_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks for this job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--np</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks</strong> (<em>int</em>) – number of tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_tasks_per_node">
<span class="sig-name descname"><span class="pre">set_tasks_per_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_tasks_per_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_tasks_per_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks per resource set.</p>
<p>This function is an alias for <cite>set_tasks_per_rs</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks_per_node</strong> (<em>int</em>) – number of tasks per resource set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.set_tasks_per_rs">
<span class="sig-name descname"><span class="pre">set_tasks_per_rs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks_per_rs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#JsrunSettings.set_tasks_per_rs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.JsrunSettings.set_tasks_per_rs" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks per resource set</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--tasks_per_rs</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks_per_rs</strong> (<em>int</em>) – number of tasks per resource set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.JsrunSettings.update_env">
<span class="sig-name descname"><span class="pre">update_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_vars</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.JsrunSettings.update_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the job environment variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – environment variables to update or add</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="mpirunsettings">
<h3>MpirunSettings<a class="headerlink" href="#mpirunsettings" title="Permalink to this headline">¶</a></h3>
<p id="openmpi-api"><code class="docutils literal notranslate"><span class="pre">MpirunSettings</span></code> are for launching with OpenMPI. <code class="docutils literal notranslate"><span class="pre">MpirunSettings</span></code> are
supported on Slurm, PBSpro, and Cobalt.</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.set_cpus_per_task" title="smartsim.settings.MpirunSettings.set_cpus_per_task"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.set_cpus_per_task</span></code></a>(cpus_per_task)</p></td>
<td><p>Set the number of tasks for this job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.set_hostlist" title="smartsim.settings.MpirunSettings.set_hostlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.set_hostlist</span></code></a>(host_list)</p></td>
<td><p>Set the hostlist for the <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> command</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.set_tasks" title="smartsim.settings.MpirunSettings.set_tasks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.set_tasks</span></code></a>(tasks)</p></td>
<td><p>Set the number of tasks for this job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.set_task_map" title="smartsim.settings.MpirunSettings.set_task_map"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.set_task_map</span></code></a>(task_mapping)</p></td>
<td><p>Set <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> task mapping</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.make_mpmd" title="smartsim.settings.MpirunSettings.make_mpmd"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.make_mpmd</span></code></a>(mpirun_settings)</p></td>
<td><p>Make a mpmd workload by combining two <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> commands</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.add_exe_args" title="smartsim.settings.MpirunSettings.add_exe_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.add_exe_args</span></code></a>(args)</p></td>
<td><p>Add executable arguments to executable</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.format_run_args" title="smartsim.settings.MpirunSettings.format_run_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.format_run_args</span></code></a>()</p></td>
<td><p>return a list of OpenMPI formatted run arguments</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.format_env_vars" title="smartsim.settings.MpirunSettings.format_env_vars"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.format_env_vars</span></code></a>()</p></td>
<td><p>Format the environment variables for mpirun</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.MpirunSettings.update_env" title="smartsim.settings.MpirunSettings.update_env"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MpirunSettings.update_env</span></code></a>(env_vars)</p></td>
<td><p>Update the job environment variables</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MpirunSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exe</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exe_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">env_vars</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Settings to run job with <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> command (OpenMPI)</p>
<p>Note that environment variables can be passed with a None
value to signify that they should be exported from the current
environment</p>
<p>Any arguments passed in the <code class="docutils literal notranslate"><span class="pre">run_args</span></code> dict will be converted
into <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> arguments and prefixed with <code class="docutils literal notranslate"><span class="pre">--</span></code>. Values of
None can be provided for arguments that do not have values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exe</strong> (<em>str</em>) – executable</p></li>
<li><p><strong>exe_args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em><em>, </em><em>optional</em>) – executable arguments, defaults to None</p></li>
<li><p><strong>run_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – arguments for run command, defaults to None</p></li>
<li><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – environment vars to launch job with, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.add_exe_args">
<span class="sig-name descname"><span class="pre">add_exe_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.MpirunSettings.add_exe_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Add executable arguments to executable</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>args</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – executable arguments</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if exe args are not strings</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.format_env_vars">
<span class="sig-name descname"><span class="pre">format_env_vars</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings.format_env_vars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings.format_env_vars" title="Permalink to this definition">¶</a></dt>
<dd><p>Format the environment variables for mpirun</p>
<p>Automatically exports <code class="docutils literal notranslate"><span class="pre">PYTHONPATH</span></code>, <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code>
and <code class="docutils literal notranslate"><span class="pre">PATH</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of env vars</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.format_run_args">
<span class="sig-name descname"><span class="pre">format_run_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings.format_run_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings.format_run_args" title="Permalink to this definition">¶</a></dt>
<dd><p>return a list of OpenMPI formatted run arguments</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of OpenMPI arguments for these settings</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.make_mpmd">
<span class="sig-name descname"><span class="pre">make_mpmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mpirun_settings</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings.make_mpmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings.make_mpmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a mpmd workload by combining two <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> commands</p>
<p>This connects the two settings to be executed with a single
Model instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mpirun_settings</strong> (<a class="reference internal" href="#smartsim.settings.MpirunSettings" title="smartsim.settings.MpirunSettings"><em>MpirunSettings</em></a>) – MpirunSettings instance</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.run_command">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_command</span></span><a class="headerlink" href="#smartsim.settings.MpirunSettings.run_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the launch binary used to launch the executable</p>
<p>Attempt to expand the path to the executable if possible</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>launch binary e.g. mpiexec</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.set_cpus_per_task">
<span class="sig-name descname"><span class="pre">set_cpus_per_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings.set_cpus_per_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings.set_cpus_per_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks for this job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--cpus-per-proc</span></code></p>
<p>note: this option has been deprecated in openMPI 4.0+
and will soon be replaced.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cpus_per_task</strong> (<em>int</em>) – number of tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the hostlist for the <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> command</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – list of host names</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if not str or list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.set_task_map">
<span class="sig-name descname"><span class="pre">set_task_map</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_mapping</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings.set_task_map"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings.set_task_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <code class="docutils literal notranslate"><span class="pre">mpirun</span></code> task mapping</p>
<p>this sets <code class="docutils literal notranslate"><span class="pre">--map-by</span> <span class="pre">&lt;mapping&gt;</span></code></p>
<p>For examples, see the man page for <code class="docutils literal notranslate"><span class="pre">mpirun</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>task_mapping</strong> (<em>str</em>) – task mapping</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.set_tasks">
<span class="sig-name descname"><span class="pre">set_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings.set_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings.set_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks for this job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--n</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks</strong> (<em>int</em>) – number of tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.set_tasks_per_node">
<span class="sig-name descname"><span class="pre">set_tasks_per_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks_per_node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/mpirunSettings.html#MpirunSettings.set_tasks_per_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.MpirunSettings.set_tasks_per_node" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks per node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks_per_node</strong> (<em>int</em>) – number of tasks to launch per node</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.MpirunSettings.update_env">
<span class="sig-name descname"><span class="pre">update_env</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env_vars</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.MpirunSettings.update_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the job environment variables</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>env_vars</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – environment variables to update or add</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<hr class="docutils" />
<section id="sbatchsettings">
<h3>SbatchSettings<a class="headerlink" href="#sbatchsettings" title="Permalink to this headline">¶</a></h3>
<p id="sbatch-api"><code class="docutils literal notranslate"><span class="pre">SbatchSettings</span></code> are used for launching batches onto Slurm
WLM systems.</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings.set_account" title="smartsim.settings.SbatchSettings.set_account"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings.set_account</span></code></a>(account)</p></td>
<td><p>Set the account for this batch job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings.set_batch_command" title="smartsim.settings.SbatchSettings.set_batch_command"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings.set_batch_command</span></code></a>(command)</p></td>
<td><p>Set the command used to launch the batch e.g.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings.set_nodes" title="smartsim.settings.SbatchSettings.set_nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings.set_nodes</span></code></a>(num_nodes)</p></td>
<td><p>Set the number of nodes for this batch job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings.set_hostlist" title="smartsim.settings.SbatchSettings.set_hostlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings.set_hostlist</span></code></a>(host_list)</p></td>
<td><p>Specify the hostlist for this job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings.set_partition" title="smartsim.settings.SbatchSettings.set_partition"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings.set_partition</span></code></a>(partition)</p></td>
<td><p>Set the partition for the batch job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings.set_queue" title="smartsim.settings.SbatchSettings.set_queue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings.set_queue</span></code></a>(queue)</p></td>
<td><p>alias for set_partition</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings.set_walltime" title="smartsim.settings.SbatchSettings.set_walltime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings.set_walltime</span></code></a>(walltime)</p></td>
<td><p>Set the walltime of the job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.SbatchSettings.format_batch_args" title="smartsim.settings.SbatchSettings.format_batch_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SbatchSettings.format_batch_args</span></code></a>()</p></td>
<td><p>Get the formatted batch arguments for a preview</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">SbatchSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify run parameters for a Slurm batch job</p>
<p>Slurm <cite>sbatch</cite> arguments can be written into <code class="docutils literal notranslate"><span class="pre">batch_args</span></code>
as a dictionary. e.g. {‘ntasks’: 1}</p>
<p>If the argument doesn’t have a parameter, put <cite>None</cite>
as the value. e.g. {‘exclusive’: None}</p>
<p>Initialization values provided (nodes, time, account)
will overwrite the same arguments in <code class="docutils literal notranslate"><span class="pre">batch_args</span></code> if present</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>int</em><em>, </em><em>optional</em>) – number of nodes, defaults to None</p></li>
<li><p><strong>time</strong> (<em>str</em><em>, </em><em>optional</em>) – walltime for job, e.g. “10:00:00” for 10 hours</p></li>
<li><p><strong>account</strong> (<em>str</em><em>, </em><em>optional</em>) – account for job, defaults to None</p></li>
<li><p><strong>batch_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – extra batch arguments, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.add_preamble">
<span class="sig-name descname"><span class="pre">add_preamble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.SbatchSettings.add_preamble" title="Permalink to this definition">¶</a></dt>
<dd><p>Add lines to the batch file preamble. The lines are just
written (unmodified) at the beginning of the batch file
(after the WLM directives) and can be used to e.g.
start virtual environments before running the executables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em><em> or </em><em>list</em><em>[</em><em>str</em><em>]</em>) – lines to add to preamble.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.batch_cmd">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch_cmd</span></span><a class="headerlink" href="#smartsim.settings.SbatchSettings.batch_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the batch command</p>
<p>Tests to see if we can expand the batch command
path. If we can, then returns the expanded batch
command. If we cannot, returns the batch command as is.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>batch command</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.format_batch_args">
<span class="sig-name descname"><span class="pre">format_batch_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings.format_batch_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings.format_batch_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the formatted batch arguments for a preview</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>batch arguments for Sbatch</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.set_account">
<span class="sig-name descname"><span class="pre">set_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings.set_account"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings.set_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the account for this batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>account</strong> (<em>str</em>) – account id</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.set_batch_command">
<span class="sig-name descname"><span class="pre">set_batch_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.SbatchSettings.set_batch_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the command used to launch the batch e.g. <code class="docutils literal notranslate"><span class="pre">sbatch</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>command</strong> (<em>str</em>) – batch command</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.set_cpus_per_task">
<span class="sig-name descname"><span class="pre">set_cpus_per_task</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cpus_per_task</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings.set_cpus_per_task"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings.set_cpus_per_task" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of cpus to use per task</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">--cpus-per-task</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_cpus</strong> (<em>int</em>) – number of cpus to use per task</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hostlist for this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to launch on</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if not str or list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.set_nodes">
<span class="sig-name descname"><span class="pre">set_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings.set_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings.set_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of nodes for this batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_nodes</strong> (<em>int</em>) – number of nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.set_partition">
<span class="sig-name descname"><span class="pre">set_partition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">partition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings.set_partition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings.set_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the partition for the batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>partition</strong> (<em>str</em>) – partition name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.set_queue">
<span class="sig-name descname"><span class="pre">set_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings.set_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings.set_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>alias for set_partition</p>
<p>Sets the partition for the slurm batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue</strong> (<em>str</em>) – the partition to run the batch job on</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.SbatchSettings.set_walltime">
<span class="sig-name descname"><span class="pre">set_walltime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walltime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/slurmSettings.html#SbatchSettings.set_walltime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.SbatchSettings.set_walltime" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the walltime of the job</p>
<p>format = “HH:MM:SS”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>walltime</strong> (<em>str</em>) – wall time</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="qsubbatchsettings">
<h3>QsubBatchSettings<a class="headerlink" href="#qsubbatchsettings" title="Permalink to this headline">¶</a></h3>
<p id="qsub-api"><code class="docutils literal notranslate"><span class="pre">QsubBatchSettings</span></code> are used to configure jobs that should
be launched as a batch on PBSPro systems.</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings.set_account" title="smartsim.settings.QsubBatchSettings.set_account"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings.set_account</span></code></a>(account)</p></td>
<td><p>Set the account for this batch job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings.set_batch_command" title="smartsim.settings.QsubBatchSettings.set_batch_command"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings.set_batch_command</span></code></a>(command)</p></td>
<td><p>Set the command used to launch the batch e.g.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings.set_nodes" title="smartsim.settings.QsubBatchSettings.set_nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings.set_nodes</span></code></a>(num_nodes)</p></td>
<td><p>Set the number of nodes for this batch job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings.set_ncpus" title="smartsim.settings.QsubBatchSettings.set_ncpus"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings.set_ncpus</span></code></a>(num_cpus)</p></td>
<td><p>Set the number of cpus obtained in each node.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings.set_queue" title="smartsim.settings.QsubBatchSettings.set_queue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings.set_queue</span></code></a>(queue)</p></td>
<td><p>Set the queue for the batch job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings.set_resource" title="smartsim.settings.QsubBatchSettings.set_resource"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings.set_resource</span></code></a>(...)</p></td>
<td><p>Set a resource value for the Qsub batch</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings.set_walltime" title="smartsim.settings.QsubBatchSettings.set_walltime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings.set_walltime</span></code></a>(walltime)</p></td>
<td><p>Set the walltime of the job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.QsubBatchSettings.format_batch_args" title="smartsim.settings.QsubBatchSettings.format_batch_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">QsubBatchSettings.format_batch_args</span></code></a>()</p></td>
<td><p>Get the formatted batch arguments for a preview</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">QsubBatchSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ncpus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify <code class="docutils literal notranslate"><span class="pre">qsub</span></code> batch parameters for a job</p>
<p><code class="docutils literal notranslate"><span class="pre">nodes</span></code>, and <code class="docutils literal notranslate"><span class="pre">ncpus</span></code> are used to create the
select statement for PBS if a select statement is not
included in the <code class="docutils literal notranslate"><span class="pre">resources</span></code>. If both are supplied
the value for select statement supplied in <code class="docutils literal notranslate"><span class="pre">resources</span></code>
will override.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>int</em><em>, </em><em>optional</em>) – number of nodes for batch, defaults to None</p></li>
<li><p><strong>ncpus</strong> (<em>int</em><em>, </em><em>optional</em>) – number of cpus per node, defaults to None</p></li>
<li><p><strong>time</strong> (<em>str</em><em>, </em><em>optional</em>) – walltime for batch job, defaults to None</p></li>
<li><p><strong>queue</strong> (<em>str</em><em>, </em><em>optional</em>) – queue to run batch in, defaults to None</p></li>
<li><p><strong>account</strong> (<em>str</em><em>, </em><em>optional</em>) – account for batch launch, defaults to None</p></li>
<li><p><strong>resources</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – overrides for resource arguments, defaults to None</p></li>
<li><p><strong>batch_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – overrides for PBS batch arguments, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.add_preamble">
<span class="sig-name descname"><span class="pre">add_preamble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.add_preamble" title="Permalink to this definition">¶</a></dt>
<dd><p>Add lines to the batch file preamble. The lines are just
written (unmodified) at the beginning of the batch file
(after the WLM directives) and can be used to e.g.
start virtual environments before running the executables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em><em> or </em><em>list</em><em>[</em><em>str</em><em>]</em>) – lines to add to preamble.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.batch_cmd">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch_cmd</span></span><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.batch_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the batch command</p>
<p>Tests to see if we can expand the batch command
path. If we can, then returns the expanded batch
command. If we cannot, returns the batch command as is.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>batch command</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.format_batch_args">
<span class="sig-name descname"><span class="pre">format_batch_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings.format_batch_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.format_batch_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the formatted batch arguments for a preview</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>batch arguments for Qsub</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – if options are supplied without values</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.set_account">
<span class="sig-name descname"><span class="pre">set_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings.set_account"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.set_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the account for this batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>acct</strong> (<em>str</em>) – account id</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.set_batch_command">
<span class="sig-name descname"><span class="pre">set_batch_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.set_batch_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the command used to launch the batch e.g. <code class="docutils literal notranslate"><span class="pre">sbatch</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>command</strong> (<em>str</em>) – batch command</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hostlist for this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to launch on</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if not str or list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.set_ncpus">
<span class="sig-name descname"><span class="pre">set_ncpus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_cpus</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings.set_ncpus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.set_ncpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of cpus obtained in each node.</p>
<p>If a select argument is provided in
<code class="docutils literal notranslate"><span class="pre">QsubBatchSettings.resources</span></code>, then
this value will be overridden</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_cpus</strong> (<em>int</em>) – number of cpus per node in select</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.set_nodes">
<span class="sig-name descname"><span class="pre">set_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings.set_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.set_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of nodes for this batch job</p>
<p>If a select argument is provided in <code class="docutils literal notranslate"><span class="pre">QsubBatchSettings.resources</span></code>
this value will be overridden</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_nodes</strong> (<em>int</em>) – number of nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.set_queue">
<span class="sig-name descname"><span class="pre">set_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings.set_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.set_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the queue for the batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue</strong> (<em>str</em>) – queue name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.set_resource">
<span class="sig-name descname"><span class="pre">set_resource</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings.set_resource"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.set_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a resource value for the Qsub batch</p>
<p>If a select statement is provided, the nodes and ncpus
arguments will be overridden. Likewise for Walltime</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource_name</strong> (<em>str</em>) – name of resource, e.g. walltime</p></li>
<li><p><strong>value</strong> (<em>str</em>) – value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.QsubBatchSettings.set_walltime">
<span class="sig-name descname"><span class="pre">set_walltime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walltime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/pbsSettings.html#QsubBatchSettings.set_walltime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.QsubBatchSettings.set_walltime" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the walltime of the job</p>
<p>format = “HH:MM:SS”</p>
<p>If a walltime argument is provided in
<code class="docutils literal notranslate"><span class="pre">QsubBatchSettings.resources</span></code>, then
this value will be overridden</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>walltime</strong> (<em>str</em>) – wall time</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="cobaltbatchsettings">
<h3>CobaltBatchSettings<a class="headerlink" href="#cobaltbatchsettings" title="Permalink to this headline">¶</a></h3>
<p id="cqsub-api"><code class="docutils literal notranslate"><span class="pre">CobaltBatchSettings</span></code> are used to configure jobs that should
be launched as a batch on Cobalt Systems. They closely mimic
that of the <code class="docutils literal notranslate"><span class="pre">QsubBatchSettings</span></code> for PBSPro.</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.CobaltBatchSettings.set_account" title="smartsim.settings.CobaltBatchSettings.set_account"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CobaltBatchSettings.set_account</span></code></a>(account)</p></td>
<td><p>Set the account for this batch job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.CobaltBatchSettings.set_batch_command" title="smartsim.settings.CobaltBatchSettings.set_batch_command"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CobaltBatchSettings.set_batch_command</span></code></a>(command)</p></td>
<td><p>Set the command used to launch the batch e.g.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.CobaltBatchSettings.set_nodes" title="smartsim.settings.CobaltBatchSettings.set_nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CobaltBatchSettings.set_nodes</span></code></a>(num_nodes)</p></td>
<td><p>Set the number of nodes for this batch job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.CobaltBatchSettings.set_queue" title="smartsim.settings.CobaltBatchSettings.set_queue"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CobaltBatchSettings.set_queue</span></code></a>(queue)</p></td>
<td><p>Set the queue for the batch job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.CobaltBatchSettings.set_walltime" title="smartsim.settings.CobaltBatchSettings.set_walltime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CobaltBatchSettings.set_walltime</span></code></a>(walltime)</p></td>
<td><p>Set the walltime of the job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.CobaltBatchSettings.format_batch_args" title="smartsim.settings.CobaltBatchSettings.format_batch_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CobaltBatchSettings.format_batch_args</span></code></a>()</p></td>
<td><p>Get the formatted batch arguments for a preview</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">CobaltBatchSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">queue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/cobaltSettings.html#CobaltBatchSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify settings for a Cobalt <code class="docutils literal notranslate"><span class="pre">qsub</span></code> batch launch</p>
<p>If the argument doesn’t have a parameter, put None
as the value. e.g. {‘exclusive’: None}</p>
<p>Initialization values provided (nodes, time, account)
will overwrite the same arguments in <code class="docutils literal notranslate"><span class="pre">batch_args</span></code> if present</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>int</em><em>, </em><em>optional</em>) – number of nodes, defaults to None</p></li>
<li><p><strong>time</strong> (<em>str</em><em>, </em><em>optional</em>) – walltime for job, e.g. “10:00:00” for 10 hours, defaults to empty str</p></li>
<li><p><strong>queue</strong> (<em>str</em><em>, </em><em>optional</em>) – queue to launch job in, defaults to None</p></li>
<li><p><strong>account</strong> (<em>str</em><em>, </em><em>optional</em>) – account for job, defaults to None</p></li>
<li><p><strong>batch_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – extra batch arguments, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.add_preamble">
<span class="sig-name descname"><span class="pre">add_preamble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.add_preamble" title="Permalink to this definition">¶</a></dt>
<dd><p>Add lines to the batch file preamble. The lines are just
written (unmodified) at the beginning of the batch file
(after the WLM directives) and can be used to e.g.
start virtual environments before running the executables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em><em> or </em><em>list</em><em>[</em><em>str</em><em>]</em>) – lines to add to preamble.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.batch_cmd">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch_cmd</span></span><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.batch_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the batch command</p>
<p>Tests to see if we can expand the batch command
path. If we can, then returns the expanded batch
command. If we cannot, returns the batch command as is.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>batch command</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.format_batch_args">
<span class="sig-name descname"><span class="pre">format_batch_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/cobaltSettings.html#CobaltBatchSettings.format_batch_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.format_batch_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the formatted batch arguments for a preview</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of batch arguments for Sbatch</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.set_account">
<span class="sig-name descname"><span class="pre">set_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/cobaltSettings.html#CobaltBatchSettings.set_account"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.set_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the account for this batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>acct</strong> (<em>str</em>) – account id</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.set_batch_command">
<span class="sig-name descname"><span class="pre">set_batch_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.set_batch_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the command used to launch the batch e.g. <code class="docutils literal notranslate"><span class="pre">sbatch</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>command</strong> (<em>str</em>) – batch command</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/cobaltSettings.html#CobaltBatchSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hostlist for this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to launch on</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if not str or list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.set_nodes">
<span class="sig-name descname"><span class="pre">set_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/cobaltSettings.html#CobaltBatchSettings.set_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.set_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of nodes for this batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_nodes</strong> (<em>int</em>) – number of nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.set_queue">
<span class="sig-name descname"><span class="pre">set_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/cobaltSettings.html#CobaltBatchSettings.set_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.set_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the queue for the batch job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue</strong> (<em>str</em>) – queue name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.set_tasks">
<span class="sig-name descname"><span class="pre">set_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_tasks</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/cobaltSettings.html#CobaltBatchSettings.set_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.set_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Set total number of processes to start</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_tasks</strong> (<em>int</em>) – number of processes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.CobaltBatchSettings.set_walltime">
<span class="sig-name descname"><span class="pre">set_walltime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walltime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/cobaltSettings.html#CobaltBatchSettings.set_walltime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.CobaltBatchSettings.set_walltime" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the walltime of the job</p>
<p>format = “HH:MM:SS”</p>
<p>Cobalt walltime can also be specified with number
of minutes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>walltime</strong> (<em>str</em>) – wall time</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="bsubbatchsettings">
<h3>BsubBatchSettings<a class="headerlink" href="#bsubbatchsettings" title="Permalink to this headline">¶</a></h3>
<p id="bsub-api"><code class="docutils literal notranslate"><span class="pre">BsubBatchSettings</span></code> are used to configure jobs that should
be launched as a batch on LSF systems.</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings.set_walltime" title="smartsim.settings.BsubBatchSettings.set_walltime"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings.set_walltime</span></code></a>(walltime)</p></td>
<td><p>Set the walltime</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings.set_smts" title="smartsim.settings.BsubBatchSettings.set_smts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings.set_smts</span></code></a>(smts)</p></td>
<td><p>Set SMTs</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings.set_project" title="smartsim.settings.BsubBatchSettings.set_project"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings.set_project</span></code></a>(project)</p></td>
<td><p>Set the project</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings.set_nodes" title="smartsim.settings.BsubBatchSettings.set_nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings.set_nodes</span></code></a>(num_nodes)</p></td>
<td><p>Set the number of nodes for this batch job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings.set_expert_mode_req" title="smartsim.settings.BsubBatchSettings.set_expert_mode_req"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings.set_expert_mode_req</span></code></a>(...)</p></td>
<td><p>Set allocation for expert mode.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings.set_hostlist" title="smartsim.settings.BsubBatchSettings.set_hostlist"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings.set_hostlist</span></code></a>(host_list)</p></td>
<td><p>Specify the hostlist for this job</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings.set_tasks" title="smartsim.settings.BsubBatchSettings.set_tasks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings.set_tasks</span></code></a>(tasks)</p></td>
<td><p>Set the number of tasks for this job</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.settings.BsubBatchSettings.format_batch_args" title="smartsim.settings.BsubBatchSettings.format_batch_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BsubBatchSettings.format_batch_args</span></code></a>()</p></td>
<td><p>Get the formatted batch arguments for a preview</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">BsubBatchSettings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">smts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify <code class="docutils literal notranslate"><span class="pre">bsub</span></code> batch parameters for a job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>int</em><em>, </em><em>optional</em>) – number of nodes for batch, defaults to None</p></li>
<li><p><strong>time</strong> (<em>str</em><em>, </em><em>optional</em>) – walltime for batch job in format hh:mm, defaults to None</p></li>
<li><p><strong>project</strong> (<em>str</em><em>, </em><em>optional</em>) – project for batch launch, defaults to None</p></li>
<li><p><strong>batch_args</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – overrides for LSF batch arguments, defaults to None</p></li>
<li><p><strong>smts</strong> (<em>int</em><em>, </em><em>optional</em>) – SMTs, defaults to None</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.add_preamble">
<span class="sig-name descname"><span class="pre">add_preamble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.add_preamble" title="Permalink to this definition">¶</a></dt>
<dd><p>Add lines to the batch file preamble. The lines are just
written (unmodified) at the beginning of the batch file
(after the WLM directives) and can be used to e.g.
start virtual environments before running the executables.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>line</strong> (<em>str</em><em> or </em><em>list</em><em>[</em><em>str</em><em>]</em>) – lines to add to preamble.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.batch_cmd">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch_cmd</span></span><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.batch_cmd" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the batch command</p>
<p>Tests to see if we can expand the batch command
path. If we can, then returns the expanded batch
command. If we cannot, returns the batch command as is.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>batch command</p>
</dd>
<dt class="field-even">Type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.format_batch_args">
<span class="sig-name descname"><span class="pre">format_batch_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.format_batch_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.format_batch_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the formatted batch arguments for a preview</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>list of batch arguments for Qsub</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_account">
<span class="sig-name descname"><span class="pre">set_account</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_account"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the project</p>
<p>this function is an alias for <cite>set_project</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>account</strong> (<em>str</em>) – project name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_batch_command">
<span class="sig-name descname"><span class="pre">set_batch_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_batch_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the command used to launch the batch e.g. <code class="docutils literal notranslate"><span class="pre">sbatch</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>command</strong> (<em>str</em>) – batch command</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_expert_mode_req">
<span class="sig-name descname"><span class="pre">set_expert_mode_req</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">res_req</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slots</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_expert_mode_req"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_expert_mode_req" title="Permalink to this definition">¶</a></dt>
<dd><p>Set allocation for expert mode. This
will activate expert mode (<code class="docutils literal notranslate"><span class="pre">-csm</span></code>) and
disregard all other allocation options.</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">-csm</span> <span class="pre">-n</span> <span class="pre">slots</span> <span class="pre">-R</span> <span class="pre">res_req</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_hostlist">
<span class="sig-name descname"><span class="pre">set_hostlist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_hostlist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_hostlist" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hostlist for this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – hosts to launch on</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if not str or list of str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_nodes">
<span class="sig-name descname"><span class="pre">set_nodes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_nodes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of nodes for this batch job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">-nnodes</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nodes</strong> (<em>int</em>) – number of nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_project">
<span class="sig-name descname"><span class="pre">set_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_project"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the project</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">-P</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>time</strong> (<em>str</em>) – project name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_queue">
<span class="sig-name descname"><span class="pre">set_queue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">queue</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_queue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the queue for this job</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>queue</strong> (<em>str</em>) – The queue to submit the job on</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_smts">
<span class="sig-name descname"><span class="pre">set_smts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">smts</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_smts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_smts" title="Permalink to this definition">¶</a></dt>
<dd><p>Set SMTs</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">-alloc_flags</span></code>. If the user sets
SMT explicitly through <code class="docutils literal notranslate"><span class="pre">-alloc_flags</span></code>, then that
takes precedence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>smts</strong> (<em>int</em>) – SMT (e.g on Summit: 1, 2, or 4)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_tasks">
<span class="sig-name descname"><span class="pre">set_tasks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">tasks</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_tasks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of tasks for this job</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">-n</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tasks</strong> (<em>int</em>) – number of tasks</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.settings.BsubBatchSettings.set_walltime">
<span class="sig-name descname"><span class="pre">set_walltime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walltime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/settings/lsfSettings.html#BsubBatchSettings.set_walltime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.settings.BsubBatchSettings.set_walltime" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the walltime</p>
<p>This sets <code class="docutils literal notranslate"><span class="pre">-W</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>walltime</strong> (<em>str</em>) – Time in hh:mm format, e.g. “10:00” for 10 hours,
if time is supplied in hh:mm:ss format, seconds
will be ignored and walltime will be set as <code class="docutils literal notranslate"><span class="pre">hh:mm</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="orchestrator">
<h2>Orchestrator<a class="headerlink" href="#orchestrator" title="Permalink to this headline">¶</a></h2>
<section id="id1">
<h3>Orchestrator<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<span class="target" id="orc-api"></span><dl class="py class">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Orchestrator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lo'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launcher</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'local'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hosts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alloc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_cmd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator" title="Permalink to this definition">¶</a></dt>
<dd><p>The Orchestrator is an in-memory database that can be launched
alongside entities in SmartSim. Data can be transferred between
entities by using one of the Python, C, C++ or Fortran clients
within an entity.</p>
<p>Initialize an Orchestrator reference for local launch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port</strong> (<em>int</em><em>, </em><em>optional</em>) – TCP/IP port, defaults to 6379</p></li>
<li><p><strong>interface</strong> (<em>str</em><em>, </em><em>optional</em>) – network interface, defaults to “lo”</p></li>
</ul>
</dd>
</dl>
<p>Extra configurations for RedisAI</p>
<p>See <a class="reference external" href="https://oss.redislabs.com/redisai/configuration/">https://oss.redislabs.com/redisai/configuration/</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>threads_per_queue</strong> (<em>int</em><em>, </em><em>optional</em>) – threads per GPU device</p></li>
<li><p><strong>inter_op_threads</strong> (<em>int</em><em>, </em><em>optional</em>) – threads accross CPU operations</p></li>
<li><p><strong>intra_op_threads</strong> (<em>int</em><em>, </em><em>optional</em>) – threads per CPU operation</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.batch">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch</span></span><a class="headerlink" href="#smartsim.database.Orchestrator.batch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.enable_checkpoints">
<span class="sig-name descname"><span class="pre">enable_checkpoints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frequency</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.enable_checkpoints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.enable_checkpoints" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the database’s save configuration to save the
DB every ‘frequency’ seconds given that at least one
write operation against the DB occurred in that time.
For example, if <cite>frequency</cite> is 900, then the database
will save to disk after 900 seconds if there is at least
1 change to the dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>frequency</strong> (<em>int</em>) – the given number of seconds before the DB saves</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.get_address">
<span class="sig-name descname"><span class="pre">get_address</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.get_address"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.get_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Return database addresses</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>addresses</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>SmartSimError</strong> – If database address cannot be found or is not active</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.hosts">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hosts</span></span><a class="headerlink" href="#smartsim.database.Orchestrator.hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the hostnames of orchestrator instance hosts</p>
<p>Note that this will only be populated after the orchestrator
has been launched by SmartSim.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>hostnames</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.is_active">
<span class="sig-name descname"><span class="pre">is_active</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.is_active"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.is_active" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the database is active</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if database is active, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.num_shards">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_shards</span></span><a class="headerlink" href="#smartsim.database.Orchestrator.num_shards" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the number of DB shards contained in the orchestrator.
This might differ from the number of <code class="docutils literal notranslate"><span class="pre">DBNode</span></code> objects, as each
<code class="docutils literal notranslate"><span class="pre">DBNode</span></code> may start more than one shard (e.g. with MPMD).</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>num_shards</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.remove_stale_files">
<span class="sig-name descname"><span class="pre">remove_stale_files</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.remove_stale_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.remove_stale_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Can be used to remove database files of a previous launch</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_batch_arg">
<span class="sig-name descname"><span class="pre">set_batch_arg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_batch_arg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_batch_arg" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a batch argument the orchestrator should launch with</p>
<p>Some commonly used arguments such as –job-name are used
by SmartSim and will not be allowed to be set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> (<em>str</em>) – batch argument to set e.g. “exclusive”</p></li>
<li><p><strong>value</strong> (<em>str</em><em> | </em><em>None</em>) – batch param - set to None if no param value</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SmartSimError</strong> – if orchestrator not launching as batch</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_cpus">
<span class="sig-name descname"><span class="pre">set_cpus</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">num_cpus</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_cpus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_cpus" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the number of CPUs available to each database shard</p>
<p>This effectively will determine how many cpus can be used for
compute threads, background threads, and network I/O.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_cpus</strong> (<em>int</em>) – number of cpus to set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_db_conf">
<span class="sig-name descname"><span class="pre">set_db_conf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_db_conf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_db_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Set any valid configuration at runtime without the need
to restart the database. All configuration parameters
that are set are immediately loaded by the database and
will take effect starting with the next command executed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>) – the configuration parameter</p></li>
<li><p><strong>value</strong> (<em>str</em>) – the database configuration parameter’s new value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_eviction_strategy">
<span class="sig-name descname"><span class="pre">set_eviction_strategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_eviction_strategy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_eviction_strategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets how the database will select what to remove when
‘maxmemory’ is reached. The default is noeviction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strategy</strong> (<em>str</em>) – The max memory policy to use e.g. “volatile-lru”, “allkeys-lru”, etc.</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>SmartSimError</strong> – If ‘strategy’ is an invalid maxmemory policy</p></li>
<li><p><strong>SmartSimError</strong> – If database is not active</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_hosts">
<span class="sig-name descname"><span class="pre">set_hosts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_hosts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hosts for the <code class="docutils literal notranslate"><span class="pre">Orchestrator</span></code> to launch on</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em>, </em><em>list</em><em>[</em><em>str</em><em>]</em>) – list of host (compute node names)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if wrong type</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_max_clients">
<span class="sig-name descname"><span class="pre">set_max_clients</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">clients</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50000</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_max_clients"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_max_clients" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the max number of connected clients at the same time.
When the number of DB shards contained in the orchestrator is
more than two, then every node will use two connections, one
incoming and another outgoing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>clients</strong> (<em>int</em><em>, </em><em>optional</em>) – the maximum number of connected clients</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_max_memory">
<span class="sig-name descname"><span class="pre">set_max_memory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mem</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_max_memory"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_max_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the max memory configuration. By default there is no memory limit.
Setting max memory to zero also results in no memory limit. Once a limit is
surpassed, keys will be removed according to the eviction strategy. The
specified memory size is case insensitive and supports the typical forms of:
1k =&gt; 1000 bytes
1kb =&gt; 1024 bytes
1m =&gt; 1000000 bytes
1mb =&gt; 1024*1024 bytes
1g =&gt; 1000000000 bytes
1gb =&gt; 1024*1024*1024 bytes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>mem</strong> (<em>str</em>) – the desired max memory size e.g. 3gb</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>SmartSimError</strong> – If ‘mem’ is an invalid memory value</p></li>
<li><p><strong>SmartSimError</strong> – If database is not active</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_max_message_size">
<span class="sig-name descname"><span class="pre">set_max_message_size</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1073741824</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_max_message_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_max_message_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the database’s memory size limit for bulk requests,
which are elements representing single strings. The default
is 1 gigabyte. Message size must be greater than or equal to 1mb.
The specified memory size should be an integer that represents
the number of bytes. For example, to set the max message size
to 1gb, use 1024*1024*1024.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>size</strong> (<em>int</em><em>, </em><em>optional</em>) – maximum message size in bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_path">
<span class="sig-name descname"><span class="pre">set_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.database.Orchestrator.set_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_run_arg">
<span class="sig-name descname"><span class="pre">set_run_arg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_run_arg"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_run_arg" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a run argument the orchestrator should launch
each node with (it will be passed to <cite>jrun</cite>)</p>
<p>Some commonly used arguments are used
by SmartSim and will not be allowed to be set.
For example, “n”, “N”, etc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>arg</strong> (<em>str</em>) – run argument to set</p></li>
<li><p><strong>value</strong> (<em>str</em><em> | </em><em>None</em>) – run parameter - set to None if no parameter value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.set_walltime">
<span class="sig-name descname"><span class="pre">set_walltime</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">walltime</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/database/orchestrator.html#Orchestrator.set_walltime"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.database.Orchestrator.set_walltime" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the batch walltime of the orchestrator</p>
<p>Note: This will only effect orchestrators launched as a batch</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>walltime</strong> (<em>str</em>) – amount of time e.g. 10 hours is 10:00:00</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SmartSimError</strong> – if orchestrator isn’t launching as batch</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.database.Orchestrator.type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#smartsim.database.Orchestrator.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the class</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="model">
<h2>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h2>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model.__init__</span></code>(name, params, path, run_settings)</p></td>
<td><p>Initialize a <code class="docutils literal notranslate"><span class="pre">Model</span></code></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.entity.model.Model.attach_generator_files" title="smartsim.entity.model.Model.attach_generator_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model.attach_generator_files</span></code></a>([to_copy, ...])</p></td>
<td><p>Attach files to an entity for generation</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.entity.model.Model.colocate_db" title="smartsim.entity.model.Model.colocate_db"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model.colocate_db</span></code></a>([port, db_cpus, ...])</p></td>
<td><p>Colocate an Orchestrator instance with this Model at runtime.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.entity.model.Model.params_to_args" title="smartsim.entity.model.Model.params_to_args"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model.params_to_args</span></code></a>()</p></td>
<td><p>Convert parameters to command line arguments and update run settings.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.entity.model.Model.register_incoming_entity" title="smartsim.entity.model.Model.register_incoming_entity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model.register_incoming_entity</span></code></a>(incoming_entity)</p></td>
<td><p>Register future communication between entities.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.entity.model.Model.enable_key_prefixing" title="smartsim.entity.model.Model.enable_key_prefixing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model.enable_key_prefixing</span></code></a>()</p></td>
<td><p>If called, the entity will prefix its keys with its own model name</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.entity.model.Model.disable_key_prefixing" title="smartsim.entity.model.Model.disable_key_prefixing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model.disable_key_prefixing</span></code></a>()</p></td>
<td><p>If called, the entity will not prefix its keys with its own model name</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.entity.model.Model.query_key_prefixing" title="smartsim.entity.model.Model.query_key_prefixing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model.query_key_prefixing</span></code></a>()</p></td>
<td><p>Inquire as to whether this entity will prefix its keys with its name</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.entity.model.Model">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_as_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/model.html#Model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.model.Model" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.entity.entity.SmartSimEntity</span></code></p>
<p>Initialize a <code class="docutils literal notranslate"><span class="pre">Model</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the model</p></li>
<li><p><strong>params</strong> (<em>dict</em>) – model parameters for writing into configuration files or
to be passed as command line arguments to executable.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – path to output, error, and configuration files</p></li>
<li><p><strong>run_settings</strong> (<a class="reference internal" href="#smartsim.settings.RunSettings" title="smartsim.settings.RunSettings"><em>RunSettings</em></a>) – launcher settings specified in the experiment</p></li>
<li><p><strong>params_as_args</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – list of parameters which have to be
interpreted as command line arguments to
be added to run_settings</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.attach_generator_files">
<span class="sig-name descname"><span class="pre">attach_generator_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">to_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_symlink</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_configure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/model.html#Model.attach_generator_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.model.Model.attach_generator_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach files to an entity for generation</p>
<p>Attach files needed for the entity that, upon generation,
will be located in the path of the entity.</p>
<p>During generation, files “to_copy” are copied into
the path of the entity, and files “to_symlink” are
symlinked into the path of the entity.</p>
<p>Files “to_configure” are text based model input files where
parameters for the model are set. Note that only models
support the “to_configure” field. These files must have
fields tagged that correspond to the values the user
would like to change. The tag is settable but defaults
to a semicolon e.g. THERMO = ;10;</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>to_copy</strong> (<em>list</em><em>, </em><em>optional</em>) – files to copy, defaults to []</p></li>
<li><p><strong>to_symlink</strong> (<em>list</em><em>, </em><em>optional</em>) – files to symlink, defaults to []</p></li>
<li><p><strong>to_configure</strong> (<em>list</em><em>, </em><em>optional</em>) – input files with tagged parameters, defaults to []</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.colocate_db">
<span class="sig-name descname"><span class="pre">colocate_db</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db_cpus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit_app_cpus</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ifname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'lo'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/model.html#Model.colocate_db"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.model.Model.colocate_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Colocate an Orchestrator instance with this Model at runtime.</p>
<p>This method will initialize settings which add an unsharded (not connected)
database to this Model instance. Only this Model will be able to communicate
with this colocated database by using the loopback TCP interface or Unix
Domain sockets (UDS coming soon).</p>
<p>Extra parameters for the db can be passed through kwargs. This includes
many performance, caching and inference settings.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ex</span><span class="o">.</span> <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">maxclients</span><span class="p">:</span> <span class="mi">100000</span><span class="p">,</span>
    <span class="n">threads_per_queue</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">inter_op_threads</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">intra_op_threads</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">server_threads</span><span class="p">:</span> <span class="mi">2</span> <span class="c1"># keydb only</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Generally these don’t need to be changed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>port</strong> (<em>int</em><em>, </em><em>optional</em>) – port to use for orchestrator database, defaults to 6379</p></li>
<li><p><strong>db_cpus</strong> (<em>int</em><em>, </em><em>optional</em>) – number of cpus to use for orchestrator, defaults to 1</p></li>
<li><p><strong>limit_app_cpus</strong> (<em>bool</em><em>, </em><em>optional</em>) – whether to limit the number of cpus used by the app, defaults to True</p></li>
<li><p><strong>ifname</strong> (<em>str</em><em>, </em><em>optional</em>) – interface to use for orchestrator, defaults to “lo”</p></li>
<li><p><strong>debug</strong> (<em>bool</em><em>, </em><em>optional</em>) – launch Model with extra debug information about the co-located db</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – additional keyword arguments to pass to the orchestrator database</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.colocated">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">colocated</span></span><a class="headerlink" href="#smartsim.entity.model.Model.colocated" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if this Model will run with a colocated Orchestrator</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.disable_key_prefixing">
<span class="sig-name descname"><span class="pre">disable_key_prefixing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/model.html#Model.disable_key_prefixing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.model.Model.disable_key_prefixing" title="Permalink to this definition">¶</a></dt>
<dd><p>If called, the entity will not prefix its keys with its own model name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.enable_key_prefixing">
<span class="sig-name descname"><span class="pre">enable_key_prefixing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/model.html#Model.enable_key_prefixing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.model.Model.enable_key_prefixing" title="Permalink to this definition">¶</a></dt>
<dd><p>If called, the entity will prefix its keys with its own model name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.params_to_args">
<span class="sig-name descname"><span class="pre">params_to_args</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/model.html#Model.params_to_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.model.Model.params_to_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert parameters to command line arguments and update run settings.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.query_key_prefixing">
<span class="sig-name descname"><span class="pre">query_key_prefixing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/model.html#Model.query_key_prefixing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.model.Model.query_key_prefixing" title="Permalink to this definition">¶</a></dt>
<dd><p>Inquire as to whether this entity will prefix its keys with its name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.register_incoming_entity">
<span class="sig-name descname"><span class="pre">register_incoming_entity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">incoming_entity</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/model.html#Model.register_incoming_entity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.model.Model.register_incoming_entity" title="Permalink to this definition">¶</a></dt>
<dd><p>Register future communication between entities.</p>
<p>Registers the named data sources that this entity
has access to by storing the key_prefix associated
with that entity</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>incoming_entity</strong> (<em>SmartSimEntity</em>) – The entity that data will be received from</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>SmartSimError</strong> – if incoming entity has already been registered</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.entity.model.Model.type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#smartsim.entity.model.Model.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the class</p>
</dd></dl>

</dd></dl>

</section>
<section id="ensemble">
<h2>Ensemble<a class="headerlink" href="#ensemble" title="Permalink to this headline">¶</a></h2>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ensemble.__init__</span></code>(name, params[, ...])</p></td>
<td><p>Initialize an Ensemble of Model instances.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ensemble.models</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.entity.ensemble.Ensemble.add_model" title="smartsim.entity.ensemble.Ensemble.add_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ensemble.add_model</span></code></a>(model)</p></td>
<td><p>Add a model to this ensemble</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.entity.ensemble.Ensemble.attach_generator_files" title="smartsim.entity.ensemble.Ensemble.attach_generator_files"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ensemble.attach_generator_files</span></code></a>([to_copy, ...])</p></td>
<td><p>Attach files to each model within the ensemble for generation</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.entity.ensemble.Ensemble.register_incoming_entity" title="smartsim.entity.ensemble.Ensemble.register_incoming_entity"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ensemble.register_incoming_entity</span></code></a>(...)</p></td>
<td><p>Register future communication between entities.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.entity.ensemble.Ensemble.enable_key_prefixing" title="smartsim.entity.ensemble.Ensemble.enable_key_prefixing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ensemble.enable_key_prefixing</span></code></a>()</p></td>
<td><p>If called, all models within this ensemble will prefix their keys with its own model name.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.entity.ensemble.Ensemble.query_key_prefixing" title="smartsim.entity.ensemble.Ensemble.query_key_prefixing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Ensemble.query_key_prefixing</span></code></a>()</p></td>
<td><p>Inquire as to whether each model within the ensemble will prefix its keys</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.entity.ensemble.Ensemble">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">Ensemble</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params_as_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_settings</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">perm_strat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all_perm'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/ensemble.html#Ensemble"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.ensemble.Ensemble" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.entity.entityList.EntityList</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> is a group of <code class="docutils literal notranslate"><span class="pre">Model</span></code> instances that can
be treated as a reference to a single instance.</p>
<p>Initialize an Ensemble of Model instances.</p>
<p>The kwargs argument can be used to pass custom input
parameters to the permutation strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – name of the ensemble</p></li>
<li><p><strong>params</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – parameters to expand into <code class="docutils literal notranslate"><span class="pre">Model</span></code> members</p></li>
<li><p><strong>params_as_args</strong> – list of params which should be used as command line arguments
to the <code class="docutils literal notranslate"><span class="pre">Model</span></code> member executables and not written to generator
files</p></li>
<li><p><strong>batch_settings</strong> (<em>BatchSettings</em><em>, </em><em>optional</em>) – describes settings for <code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> as batch workload</p></li>
<li><p><strong>run_settings</strong> (<a class="reference internal" href="#smartsim.settings.RunSettings" title="smartsim.settings.RunSettings"><em>RunSettings</em></a><em>, </em><em>optional</em>) – describes how each <code class="docutils literal notranslate"><span class="pre">Model</span></code> should be executed</p></li>
<li><p><strong>replicas</strong> (<em>int</em><em>, </em><em>optional</em>) – number of <code class="docutils literal notranslate"><span class="pre">Model</span></code> replicas to create - a keyword argument of kwargs</p></li>
<li><p><strong>perm_strategy</strong> (<em>str</em>) – strategy for expanding <code class="docutils literal notranslate"><span class="pre">params</span></code> into
<code class="docutils literal notranslate"><span class="pre">Model</span></code> instances from params argument
options are “all_perm”, “stepped”, “random”
or a callable function. Defaults to “all_perm”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">Ensemble</span></code> instance</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">Ensemble</span></code></p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.ensemble.Ensemble.add_model">
<span class="sig-name descname"><span class="pre">add_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/ensemble.html#Ensemble.add_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.ensemble.Ensemble.add_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a model to this ensemble</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>model</strong> (<a class="reference internal" href="#smartsim.entity.model.Model" title="smartsim.entity.model.Model"><em>Model</em></a>) – model instance to be added</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>TypeError</strong> – if model is not an instance of <code class="docutils literal notranslate"><span class="pre">Model</span></code></p></li>
<li><p><strong>EntityExistsError</strong> – if model already exists in this ensemble</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.ensemble.Ensemble.attach_generator_files">
<span class="sig-name descname"><span class="pre">attach_generator_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">to_copy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_symlink</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_configure</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/ensemble.html#Ensemble.attach_generator_files"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.ensemble.Ensemble.attach_generator_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Attach files to each model within the ensemble for generation</p>
<p>Attach files needed for the entity that, upon generation,
will be located in the path of the entity.</p>
<p>During generation, files “to_copy” are copied into
the path of the entity, and files “to_symlink” are
symlinked into the path of the entity.</p>
<p>Files “to_configure” are text based model input files where
parameters for the model are set. Note that only models
support the “to_configure” field. These files must have
fields tagged that correspond to the values the user
would like to change. The tag is settable but defaults
to a semicolon e.g. THERMO = ;10;</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>to_copy</strong> (<em>list</em><em>, </em><em>optional</em>) – files to copy, defaults to []</p></li>
<li><p><strong>to_symlink</strong> (<em>list</em><em>, </em><em>optional</em>) – files to symlink, defaults to []</p></li>
<li><p><strong>to_configure</strong> (<em>list</em><em>, </em><em>optional</em>) – input files with tagged parameters, defaults to []</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.ensemble.Ensemble.enable_key_prefixing">
<span class="sig-name descname"><span class="pre">enable_key_prefixing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/ensemble.html#Ensemble.enable_key_prefixing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.ensemble.Ensemble.enable_key_prefixing" title="Permalink to this definition">¶</a></dt>
<dd><p>If called, all models within this ensemble will prefix their keys with its
own model name.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.ensemble.Ensemble.query_key_prefixing">
<span class="sig-name descname"><span class="pre">query_key_prefixing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/ensemble.html#Ensemble.query_key_prefixing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.ensemble.Ensemble.query_key_prefixing" title="Permalink to this definition">¶</a></dt>
<dd><p>Inquire as to whether each model within the ensemble will prefix its keys</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if all models have key prefixing enabled, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.entity.ensemble.Ensemble.register_incoming_entity">
<span class="sig-name descname"><span class="pre">register_incoming_entity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">incoming_entity</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/entity/ensemble.html#Ensemble.register_incoming_entity"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.entity.ensemble.Ensemble.register_incoming_entity" title="Permalink to this definition">¶</a></dt>
<dd><p>Register future communication between entities.</p>
<p>Registers the named data sources that this entity
has access to by storing the key_prefix associated
with that entity</p>
<p>Only python clients can have multiple incoming connections</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>incoming_entity</strong> (<em>SmartSimEntity</em>) – The entity that data will be received from</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.entity.ensemble.Ensemble.type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#smartsim.entity.ensemble.Ensemble.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the class</p>
</dd></dl>

</dd></dl>

</section>
<section id="machine-learning">
<h2>Machine Learning<a class="headerlink" href="#machine-learning" title="Permalink to this headline">¶</a></h2>
<p id="ml-api">SmartSim includes built-in utilities for supporting TensorFlow, Keras, and Pytorch.</p>
<section id="tensorflow">
<h3>TensorFlow<a class="headerlink" href="#tensorflow" title="Permalink to this headline">¶</a></h3>
<p id="smartsim-tf-api">SmartSim includes built-in utilities for supporting TensorFlow and Keras in training and inference.</p>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.ml.tf.utils.freeze_model" title="smartsim.ml.tf.utils.freeze_model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">freeze_model</span></code></a>(model, output_dir, file_name)</p></td>
<td><p>Freeze a Keras or TensorFlow Graph</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-smartsim.ml.tf.utils"></span><dl class="py function">
<dt class="sig sig-object py" id="smartsim.ml.tf.utils.freeze_model">
<span class="sig-name descname"><span class="pre">freeze_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/ml/tf/utils.html#freeze_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.ml.tf.utils.freeze_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Freeze a Keras or TensorFlow Graph</p>
<p>to use a Keras or TensorFlow model in SmartSim, the model
must be frozen and the inputs and outputs provided to the
smartredis.client.set_model_from_file() method.</p>
<p>This utiliy function provides everything users need to take
a trained model and put it inside an <code class="docutils literal notranslate"><span class="pre">orchestrator</span></code> instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> (<em>tf.Module</em>) – TensorFlow or Keras model</p></li>
<li><p><strong>output_dir</strong> (<em>str</em>) – output dir to save model file to</p></li>
<li><p><strong>file_name</strong> (<em>str</em>) – name of model file to create</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>path to model file, model input layer names, model output layer names</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str, list[str], list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="smartsim.ml.tf.StaticDataGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">StaticDataGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/ml/tf/data.html#StaticDataGenerator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.ml.tf.StaticDataGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.ml.data.StaticDataDownloader</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">tensorflow.python.keras.utils.data_utils.Sequence</span></code></p>
<p>A class to download a dataset from the DB.</p>
<p>Details about parameters and features of this class can be found
in the documentation of <code class="docutils literal notranslate"><span class="pre">StaticDataDownloader</span></code>, of which it is just
a TensorFlow-specialized sub-class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.tf.StaticDataGenerator.init_samples">
<span class="sig-name descname"><span class="pre">init_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.tf.StaticDataGenerator.init_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize samples (and targets, if needed).</p>
<p>This function will not return until samples have been downloaded
from all sources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sources</strong> (<em>list</em><em>[</em><em>tuple</em><em>]</em><em>, </em><em>optional</em>) – List of sources as defined in <cite>init_sources</cite>, defaults to None,
in which case sources will be initialized, unless <cite>self.sources</cite>
is already set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.tf.StaticDataGenerator.init_sources">
<span class="sig-name descname"><span class="pre">init_sources</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.tf.StaticDataGenerator.init_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>Initalize list of data sources based on incoming entitites and self.sub_indices.</p>
<p>Each source is represented as a tuple <cite>(producer_name, sub_index)</cite>.
Before <cite>init_samples()</cite> is called, the user can modify the list.
Once <cite>init_samples()</cite> is called, all data is downloaded and batches
can be obtained with iter(). The list of all sources is stored as <cite>self.sources</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If self.uploader_info is set to <cite>auto</cite> but no <cite>uploader_name</cite> is specified.</p></li>
<li><p><strong>ValueError</strong> – If self.uploader_info is not set to <cite>auto</cite> or <cite>manual</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.ml.tf.StaticDataGenerator.need_targets">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">need_targets</span></span><a class="headerlink" href="#smartsim.ml.tf.StaticDataGenerator.need_targets" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute if targets have to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether targets (or labels) should be downloaded</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.tf.StaticDataGenerator.on_epoch_end">
<span class="sig-name descname"><span class="pre">on_epoch_end</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/ml/tf/data.html#StaticDataGenerator.on_epoch_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.ml.tf.StaticDataGenerator.on_epoch_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback called at the end of each training epoch</p>
<p>If <cite>self.shuffle</cite> is set to <cite>True</cite>, data is shuffled.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="smartsim.ml.tf.DynamicDataGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DynamicDataGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/ml/tf/data.html#DynamicDataGenerator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.ml.tf.DynamicDataGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.ml.data.DynamicDataDownloader</span></code>, <a class="reference internal" href="#smartsim.ml.tf.StaticDataGenerator" title="smartsim.ml.tf.data.StaticDataGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.ml.tf.data.StaticDataGenerator</span></code></a></p>
<p>A class to download batches from the DB.</p>
<p>Details about parameters and features of this class can be found
in the documentation of <code class="docutils literal notranslate"><span class="pre">DynamicDataDownloader</span></code>, of which it is just
a TensorFlow-specialized sub-class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.tf.DynamicDataGenerator.init_samples">
<span class="sig-name descname"><span class="pre">init_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.tf.DynamicDataGenerator.init_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize samples (and targets, if needed).</p>
<p>This function will not return until at least one batch worth of data
has been downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sources</strong> (<em>list</em><em>[</em><em>tuple</em><em>]</em><em>, </em><em>optional</em>) – List of sources as defined in <cite>init_sources</cite>, defaults to None,
in which case sources will be initialized, unless <cite>self.sources</cite>
is already set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.tf.DynamicDataGenerator.init_sources">
<span class="sig-name descname"><span class="pre">init_sources</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.tf.DynamicDataGenerator.init_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>Initalize list of data sources based on incoming entitites and self.sub_indices.</p>
<p>Each source is represented as a tuple <cite>(producer_name, sub_index)</cite>.
Before <cite>init_samples()</cite> is called, the user can modify the list.
Once <cite>init_samples()</cite> is called, all data is downloaded and batches
can be obtained with iter(). The list of all sources is stored as <cite>self.sources</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If self.uploader_info is set to <cite>auto</cite> but no <cite>uploader_name</cite> is specified.</p></li>
<li><p><strong>ValueError</strong> – If self.uploader_info is not set to <cite>auto</cite> or <cite>manual</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.ml.tf.DynamicDataGenerator.need_targets">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">need_targets</span></span><a class="headerlink" href="#smartsim.ml.tf.DynamicDataGenerator.need_targets" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute if targets have to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether targets (or labels) should be downloaded</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.tf.DynamicDataGenerator.on_epoch_end">
<span class="sig-name descname"><span class="pre">on_epoch_end</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/ml/tf/data.html#DynamicDataGenerator.on_epoch_end"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.ml.tf.DynamicDataGenerator.on_epoch_end" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback called at the end of each training epoch</p>
<p>Update data (the DB is queried for new batches) and
if <cite>self.shuffle</cite> is set to <cite>True</cite>, data is also shuffled.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.tf.DynamicDataGenerator.update_data">
<span class="sig-name descname"><span class="pre">update_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.tf.DynamicDataGenerator.update_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Update data.</p>
<p>Fetch new batches (if available) from the DB. Also shuffle
list of samples if <cite>self.shuffle</cite> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
<section id="pytorch">
<h3>PyTorch<a class="headerlink" href="#pytorch" title="Permalink to this headline">¶</a></h3>
<p id="smartsim-torch-api">SmartSim includes built-in utilities for supporting PyTorch in training and inference.</p>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.ml.torch.StaticDataGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">StaticDataGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/ml/torch/data.html#StaticDataGenerator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.ml.torch.StaticDataGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.ml.data.StaticDataDownloader</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.data.dataset.IterableDataset</span></code></p>
<p>A class to download a dataset from the DB.</p>
<p>Details about parameters and features of this class can be found
in the documentation of <code class="docutils literal notranslate"><span class="pre">StaticDataDownloader</span></code>, of which it is just
a PyTorch-specialized sub-class.</p>
<p>Note that if the <code class="docutils literal notranslate"><span class="pre">StaticDataGenerator</span></code> has to be used through a <code class="docutils literal notranslate"><span class="pre">DataLoader</span></code>,
<cite>init_samples</cite> must be set to <cite>False</cite>, as sources and samples will be initialized
by the <code class="docutils literal notranslate"><span class="pre">DataLoader</span></code> workers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.torch.StaticDataGenerator.init_samples">
<span class="sig-name descname"><span class="pre">init_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.torch.StaticDataGenerator.init_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize samples (and targets, if needed).</p>
<p>This function will not return until samples have been downloaded
from all sources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sources</strong> (<em>list</em><em>[</em><em>tuple</em><em>]</em><em>, </em><em>optional</em>) – List of sources as defined in <cite>init_sources</cite>, defaults to None,
in which case sources will be initialized, unless <cite>self.sources</cite>
is already set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.torch.StaticDataGenerator.init_sources">
<span class="sig-name descname"><span class="pre">init_sources</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.torch.StaticDataGenerator.init_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>Initalize list of data sources based on incoming entitites and self.sub_indices.</p>
<p>Each source is represented as a tuple <cite>(producer_name, sub_index)</cite>.
Before <cite>init_samples()</cite> is called, the user can modify the list.
Once <cite>init_samples()</cite> is called, all data is downloaded and batches
can be obtained with iter(). The list of all sources is stored as <cite>self.sources</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If self.uploader_info is set to <cite>auto</cite> but no <cite>uploader_name</cite> is specified.</p></li>
<li><p><strong>ValueError</strong> – If self.uploader_info is not set to <cite>auto</cite> or <cite>manual</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.ml.torch.StaticDataGenerator.need_targets">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">need_targets</span></span><a class="headerlink" href="#smartsim.ml.torch.StaticDataGenerator.need_targets" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute if targets have to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether targets (or labels) should be downloaded</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="smartsim.ml.torch.DynamicDataGenerator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DynamicDataGenerator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/ml/torch/data.html#DynamicDataGenerator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.ml.torch.DynamicDataGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.ml.data.DynamicDataDownloader</span></code>, <a class="reference internal" href="#smartsim.ml.torch.StaticDataGenerator" title="smartsim.ml.torch.data.StaticDataGenerator"><code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.ml.torch.data.StaticDataGenerator</span></code></a></p>
<p>A class to download batches from the DB.</p>
<p>Details about parameters and features of this class can be found
in the documentation of <code class="docutils literal notranslate"><span class="pre">DynamicDataDownloader</span></code>, of which it is just
a PyTorch-specialized sub-class.</p>
<p>Note that if the <code class="docutils literal notranslate"><span class="pre">DynamicDataGenerator</span></code> has to be used through a <code class="docutils literal notranslate"><span class="pre">DataLoader</span></code>,
<cite>init_samples</cite> must be set to <cite>False</cite>, as sources and samples will be initialized
by the <code class="docutils literal notranslate"><span class="pre">DataLoader</span></code> workers.</p>
<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.torch.DynamicDataGenerator.init_samples">
<span class="sig-name descname"><span class="pre">init_samples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.torch.DynamicDataGenerator.init_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize samples (and targets, if needed).</p>
<p>This function will not return until at least one batch worth of data
has been downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>sources</strong> (<em>list</em><em>[</em><em>tuple</em><em>]</em><em>, </em><em>optional</em>) – List of sources as defined in <cite>init_sources</cite>, defaults to None,
in which case sources will be initialized, unless <cite>self.sources</cite>
is already set</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.torch.DynamicDataGenerator.init_sources">
<span class="sig-name descname"><span class="pre">init_sources</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.torch.DynamicDataGenerator.init_sources" title="Permalink to this definition">¶</a></dt>
<dd><p>Initalize list of data sources based on incoming entitites and self.sub_indices.</p>
<p>Each source is represented as a tuple <cite>(producer_name, sub_index)</cite>.
Before <cite>init_samples()</cite> is called, the user can modify the list.
Once <cite>init_samples()</cite> is called, all data is downloaded and batches
can be obtained with iter(). The list of all sources is stored as <cite>self.sources</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ValueError</strong> – If self.uploader_info is set to <cite>auto</cite> but no <cite>uploader_name</cite> is specified.</p></li>
<li><p><strong>ValueError</strong> – If self.uploader_info is not set to <cite>auto</cite> or <cite>manual</cite>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.ml.torch.DynamicDataGenerator.need_targets">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">need_targets</span></span><a class="headerlink" href="#smartsim.ml.torch.DynamicDataGenerator.need_targets" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute if targets have to be downloaded.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Whether targets (or labels) should be downloaded</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.ml.torch.DynamicDataGenerator.update_data">
<span class="sig-name descname"><span class="pre">update_data</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.ml.torch.DynamicDataGenerator.update_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Update data.</p>
<p>Fetch new batches (if available) from the DB. Also shuffle
list of samples if <cite>self.shuffle</cite> is set to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="smartsim.ml.torch.DataLoader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">DataLoader</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#smartsim.ml.torch.StaticDataGenerator" title="smartsim.ml.torch.data.StaticDataGenerator"><span class="pre">smartsim.ml.torch.data.StaticDataGenerator</span></a></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/ml/torch/data.html#DataLoader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.ml.torch.DataLoader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">torch.utils.data.dataloader.DataLoader</span></code></p>
<p>DataLoader to be used as a wrapper of StaticDataGenerator or DynamicDataGenerator</p>
<p>This is just a sub-class of <code class="docutils literal notranslate"><span class="pre">torch.utils.data.DataLoader</span></code> which
sets up sources of a data generator correctly. DataLoader parameters
such as <cite>num_workers</cite> can be passed at initialization. <cite>batch_size</cite> should always
be set to None.</p>
</dd></dl>

</section>
</section>
<section id="slurm">
<h2>Slurm<a class="headerlink" href="#slurm" title="Permalink to this headline">¶</a></h2>
<table class="longtable table autosummary">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#smartsim.slurm.get_allocation" title="smartsim.slurm.get_allocation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_allocation</span></code></a>([nodes, time, account, options])</p></td>
<td><p>Request an allocation</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#smartsim.slurm.release_allocation" title="smartsim.slurm.release_allocation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">release_allocation</span></code></a>(alloc_id)</p></td>
<td><p>Free an allocation's resources</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-smartsim.slurm"></span><dl class="py function">
<dt class="sig sig-object py" id="smartsim.slurm.get_allocation">
<span class="sig-name descname"><span class="pre">get_allocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">account</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/slurm.html#get_allocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.slurm.get_allocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Request an allocation</p>
<p>This function requests an allocation with the specified arguments.
Anything passed to the options will be processed as a Slurm
argument and appended to the salloc command with the appropriate
prefix (e.g. “-” or “–“).</p>
<p>The options can be used to pass extra settings to the
workload manager such as the following for Slurm:</p>
<blockquote>
<div><ul class="simple">
<li><p>nodelist=”nid00004”</p></li>
</ul>
</div></blockquote>
<p>For arguments without a value, pass None or and empty
string as the value. For Slurm:</p>
<blockquote>
<div><ul class="simple">
<li><p>exclusive=None</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>int</em><em>, </em><em>optional</em>) – number of nodes for the allocation, defaults to 1</p></li>
<li><p><strong>time</strong> (<em>str</em><em>, </em><em>optional</em>) – wall time of the allocation, HH:MM:SS format, defaults to None</p></li>
<li><p><strong>account</strong> (<em>str</em><em>, </em><em>optional</em>) – account id for allocation, defaults to None</p></li>
<li><p><strong>options</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em><em>, </em><em>optional</em>) – additional options for the slurm wlm, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>LauncherError</strong> – if the allocation is not successful</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the id of the allocation</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="smartsim.slurm.get_default_partition">
<span class="sig-name descname"><span class="pre">get_default_partition</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/slurm.html#get_default_partition"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.slurm.get_default_partition" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the default partition from Slurm</p>
<p>This default partition is assumed to be the partition with
a star following its partition name in sinfo output</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the name of the default partition</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="smartsim.slurm.release_allocation">
<span class="sig-name descname"><span class="pre">release_allocation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">alloc_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/slurm.html#release_allocation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.slurm.release_allocation" title="Permalink to this definition">¶</a></dt>
<dd><p>Free an allocation’s resources</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>alloc_id</strong> (<em>str</em>) – allocation id</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>LauncherError</strong> – if allocation could not be freed</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="smartsim.slurm.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ppn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">partition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/slurm.html#validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.slurm.validate" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that there are sufficient resources in the provided Slurm partitions.</p>
<p>if no partition is provided, the default partition is found and used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>nodes</strong> (<em>int</em><em>, </em><em>optional</em>) – Override the default node count to validate, defaults to 1</p></li>
<li><p><strong>ppn</strong> (<em>int</em><em>, </em><em>optional</em>) – Override the default processes per node to validate, defaults to 1</p></li>
<li><p><strong>partition</strong> (<em>str</em><em>, </em><em>optional</em>) – partition to validate, defaults to None</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p>LauncherError</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>True if resources are available, False otherwise</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="ray">
<h2>Ray<a class="headerlink" href="#ray" title="Permalink to this headline">¶</a></h2>
<dl class="simple" id="ray-api">
<dt><code class="docutils literal notranslate"><span class="pre">RayCluster</span></code> is used to launch a Ray cluster</dt><dd><p>and can be launched as a batch or in an interactive allocation.</p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="smartsim.exp.ray.RayCluster">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">RayCluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/usr/local/src/SmartSim/doc'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ray_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6789</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ray_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launcher</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'local'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'01:00:00'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interface</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ipogif0'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alloc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_command</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/exp/ray/raycluster.html#RayCluster"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.exp.ray.RayCluster" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">smartsim.entity.entityList.EntityList</span></code></p>
<p>Entity used to run a Ray cluster on a given number of hosts. One Ray node is
launched on each host, and the first host is used to launch the head node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>) – The name of the entity.</p></li>
<li><p><strong>path</strong> (<em>str</em>) – path to output, error, and configuration files</p></li>
<li><p><strong>ray_port</strong> (<em>int</em>) – Port at which the head node will be running.</p></li>
<li><p><strong>ray_args</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – Arguments to be passed to Ray executable.</p></li>
<li><p><strong>num_nodes</strong> (<em>int</em>) – Number of hosts, includes 1 head node and all worker nodes.</p></li>
<li><p><strong>run_args</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – Arguments to pass to launcher to specify details such as partition or time.</p></li>
<li><p><strong>batch_args</strong> (<em>dict</em><em>[</em><em>str</em><em>,</em><em>str</em><em>]</em>) – Additional batch arguments passed to launcher when running batch jobs.</p></li>
<li><p><strong>launcher</strong> (<em>str</em>) – Name of launcher to use for starting the cluster.</p></li>
<li><p><strong>interface</strong> (<em>str</em>) – Name of network interface the cluster nodes should bind to.</p></li>
<li><p><strong>alloc</strong> (<em>int</em>) – ID of allocation to run on, if obtained with <code class="docutils literal notranslate"><span class="pre">smartsim.slurm.get_allocation</span></code></p></li>
<li><p><strong>batch</strong> (<em>bool</em>) – Whether cluster should be launched as batch file, ignored when <code class="docutils literal notranslate"><span class="pre">launcher</span></code> is <cite>local</cite></p></li>
<li><p><strong>time</strong> (<em>str</em>) – The walltime the cluster will be running for</p></li>
<li><p><strong>run_command</strong> (<em>str</em>) – specify launch binary, defaults to automatic selection.</p></li>
<li><p><strong>hosts</strong> (<em>str</em><em>, </em><em>list</em><em>[</em><em>str</em><em>]</em>) – specify hosts to launch on, defaults to None. Optional if not launching with OpenMPI.</p></li>
<li><p><strong>password</strong> (<em>str</em>) – Password to use for Redis server, which is passed as <cite>–redis_password</cite> to <cite>ray start</cite>.
Can be set to
- <cite>auto</cite>: a strong password will be generated internally
- a string: it will be used as password
- <cite>None</cite>: the default Ray password will be used.
Defaults to <cite>auto</cite></p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="smartsim.exp.ray.RayCluster.batch">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">batch</span></span><a class="headerlink" href="#smartsim.exp.ray.RayCluster.batch" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.exp.ray.RayCluster.get_dashboard_address">
<span class="sig-name descname"><span class="pre">get_dashboard_address</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/exp/ray/raycluster.html#RayCluster.get_dashboard_address"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.exp.ray.RayCluster.get_dashboard_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns dashboard address</p>
<p>The format is &lt;head_ip&gt;:&lt;dashboard_port&gt;</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Dashboard address</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.exp.ray.RayCluster.get_head_address">
<span class="sig-name descname"><span class="pre">get_head_address</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/exp/ray/raycluster.html#RayCluster.get_head_address"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.exp.ray.RayCluster.get_head_address" title="Permalink to this definition">¶</a></dt>
<dd><p>Return address of head node</p>
<p>If address has not been initialized, returns None</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Address of head node</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.exp.ray.RayCluster.set_hosts">
<span class="sig-name descname"><span class="pre">set_hosts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">launcher</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/smartsim/exp/ray/raycluster.html#RayCluster.set_hosts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#smartsim.exp.ray.RayCluster.set_hosts" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the hosts for the <code class="docutils literal notranslate"><span class="pre">RayCluster</span></code> to launch on. This is
optional, unless <code class="docutils literal notranslate"><span class="pre">run_command</span></code> is <cite>mpirun</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>host_list</strong> (<em>str</em><em> | </em><em>list</em><em>[</em><em>str</em><em>]</em>) – list of hosts (compute node names)</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – if wrong type</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="smartsim.exp.ray.RayCluster.set_path">
<span class="sig-name descname"><span class="pre">set_path</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">new_path</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#smartsim.exp.ray.RayCluster.set_path" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="smartsim.exp.ray.RayCluster.type">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#smartsim.exp.ray.RayCluster.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of the class</p>
</dd></dl>

</dd></dl>

</section>
</section>


              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../launchers.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Launchers</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../smartredis.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">SmartRedis</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Cray Labs<br/>
    
        &copy; Copyright 2021-2022, Hewlett Packard Enterprise.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>