

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>DataSet Conversions &#8212; SmartSim 0.6.2 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom_tab_style.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'sr_dataset_conversions';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Runtime Requirements" href="sr_runtime.html" />
    <link rel="prev" title="Data Structures" href="sr_data_structures.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">SmartSim 0.6.2 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="versions.html">Versions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation_instructions/basic.html">Basic Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation_instructions/platform.html">Installation on specific platforms</a></li>







<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="smartsim_zoo.html">Contributing Examples</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="tutorials/getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/online_analysis/lattice/online_analysis.html">Online Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/ml_inference/Inference-in-SmartSim.html">Online Inference</a></li>

<li class="toctree-l1"><a class="reference internal" href="tutorials/ml_training/surrogate/train_surrogate.html">Online Training</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">SmartSim</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="experiment.html">Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestrator.html">Orchestrator</a></li>
<li class="toctree-l1"><a class="reference internal" href="launchers.html">Launchers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ml_features.html">ML Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/smartsim_api.html">SmartSim API</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">SmartRedis</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="smartredis.html">SmartRedis</a></li>
<li class="toctree-l1"><a class="reference internal" href="sr_integration.html">Integrating into a Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sr_python_walkthrough.html">Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="sr_cpp_walkthrough.html">C++</a></li>
<li class="toctree-l1"><a class="reference internal" href="sr_fortran_walkthrough.html">Fortran</a></li>
<li class="toctree-l1"><a class="reference internal" href="sr_data_structures.html">Data Structures</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">DataSet Conversions</a></li>
<li class="toctree-l1"><a class="reference internal" href="sr_runtime.html">Runtime Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="sr_advanced_topics.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/smartredis_api.html">SmartRedis API</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">SmartDashboard</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="smartdashboard.html">SmartDashboard</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="code_of_conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/CrayLabs/SmartSim" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/CrayLabs/SmartSim/issues/new?title=Issue%20on%20page%20%2Fsr_dataset_conversions.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/sr_dataset_conversions.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>DataSet Conversions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#xarray-dataset-conversions">Xarray DataSet Conversions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-metadata-for-xarray">add_metadata_for_xarray</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform-to-xarray">transform_to_xarray</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="dataset-conversions">
<h1>DataSet Conversions<a class="headerlink" href="#dataset-conversions" title="Permalink to this heading">#</a></h1>
<p>Dataset conversion refers to a multi-step workflow where a user can create a SmartRedis dataset
which can then be retrieved on the Python side, and then transformed into a {Dataformat} object.
An Xarray Dataset conversion, in this case, creates a SmartRedis dataset that is prepared to be converted
into a an Xarray Dataarray object, and then performs the conversion into the Xarray Dataarray object.</p>
<p>Dataset conversion to Xarray within the DatasetConversion class is two-step process:
#. where additional metadata is added to an existing Dataset to add the possibility of conversion and
#. a transformation method which ingests a Dataset and returns an object in the native dataformat.</p>
<section id="xarray-dataset-conversions">
<h2>Xarray DataSet Conversions<a class="headerlink" href="#xarray-dataset-conversions" title="Permalink to this heading">#</a></h2>
<p>The Xarray Dataset format conversion methods follow the format of the two step process, where the
<code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method performs the task of adding additional metadata to an existing Dataset,
allowing the <code class="docutils literal notranslate"><span class="pre">transform_to_xarray()</span></code> method to identify which fields should be used in the construction of
the specific data format.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">add</span> <span class="n">meta_data_for_xarray</span> <span class="n">interface</span>
<span class="n">add_metadata_for_xarray</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">data_names</span><span class="p">,</span> <span class="n">dim_names</span><span class="p">,</span> <span class="n">coord_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attr_names</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">transform_to_xarray</span> <span class="n">interface</span>
<span class="n">transform_to_xarray</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>
</div>
<p>Separating the adding of the metadata and the transformation into the appropriate data format minimizes
the SmartRedis interference with the existing dataset.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()``and</span> <span class="pre">``transform_to_xarray()</span></code> methods support adding multiple tensors into
SmartRedis datasets and storing their common metadata. If multiple data items are present with common metadata
then multiple xarrays will be built. Support for multiple data items with differing metadata is not yet supported.</p>
</div>
<section id="add-metadata-for-xarray">
<h3>add_metadata_for_xarray<a class="headerlink" href="#add-metadata-for-xarray" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method supports attaching data and metadata to a tensor within a SmartRedis dataset,
preparing the SmartRedis Dataset for transformation. The <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method should not interfere with the
existing Dataset API to extract and manipulate data.</p>
<p>We expect users to construct the datasets themselves using the Dataset API before calling the <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method.
Only the field names will be being passed into <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code>, so the actual structure of the dataset and any of the metadata will
not be affected after calling the method.</p>
<p>Below is an example of the creation of a SmartRedis Dataset and addition of tensor data and metadata done by the user:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ds1</span> <span class="o">=</span> <span class="n">Dataset</span><span class="p">(</span><span class="s2">&quot;ds-1d&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_tensor</span><span class="p">(</span><span class="s2">&quot;1ddata&quot;</span><span class="p">,</span> <span class="n">data1d</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_tensor</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">longitude_1d</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_meta_string</span><span class="p">(</span><span class="s2">&quot;x_coord_units&quot;</span><span class="p">,</span> <span class="s2">&quot;degrees E&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_meta_string</span><span class="p">(</span><span class="s2">&quot;x_coord_longname&quot;</span><span class="p">,</span> <span class="s2">&quot;Longitude&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_meta_string</span><span class="p">(</span><span class="s2">&quot;units&quot;</span><span class="p">,</span> <span class="s2">&quot;m/s&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_meta_string</span><span class="p">(</span><span class="s2">&quot;longname&quot;</span><span class="p">,</span> <span class="s2">&quot;velocity&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_meta_string</span><span class="p">(</span><span class="s2">&quot;convention&quot;</span><span class="p">,</span> <span class="s2">&quot;CF1.5&quot;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">add_meta_string</span><span class="p">(</span><span class="s2">&quot;dim_data_x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Below is an example of the <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method calls to pass in field names of data and
metadata of the created SmartRedis Dataset under the appropriate parameter names for the creation of
the tensor data variable for the Xarray object and the coordinate data variable for the Xarray object:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calling method add_metadata_for_xarray on the created dataset</span>
<span class="n">DatasetConverter</span><span class="o">.</span><span class="n">add_metadata_for_xarray</span><span class="p">(</span>
    <span class="n">ds1</span><span class="p">,</span>
    <span class="n">data_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;1ddata&quot;</span><span class="p">],</span>
    <span class="n">dim_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dim_data_x&quot;</span><span class="p">],</span>
    <span class="n">coord_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span>
    <span class="n">attr_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;units&quot;</span><span class="p">,</span> <span class="s2">&quot;longname&quot;</span><span class="p">,</span> <span class="s2">&quot;convention&quot;</span><span class="p">]</span>
<span class="p">)</span>
<span class="c1"># Calling method add_metadata_for_xarray for longitude coordinate</span>
<span class="n">DatasetConverter</span><span class="o">.</span><span class="n">add_metadata_for_xarray</span><span class="p">(</span>
    <span class="n">ds1</span><span class="p">,</span>
    <span class="n">data_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span>
    <span class="n">dim_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;dim_data_x&quot;</span><span class="p">],</span>
    <span class="n">attr_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x_coord_units&quot;</span><span class="p">,</span> <span class="s2">&quot;x_coord_longname&quot;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method has the ability to define the coordinates of each dimension of a tensor added to the dataset
(e.g. the actual x, y, z values of every element of a 3D tensor or vector of timestamps for a 1D timeseries)
If the user would like to add data variables as coordinates to their Xarray DataArray, the data name of the data variable
must match the name of the coordinate_name being specified in the <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> parameters, and the method will recognize the appropriately named data variable
as a coordianate variable to be added to the Xarray DataArray.</p>
<p>The ability to extract data (metadata,tensors, etc.) by their original field names remains intact after any call to
<code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method uses metadata names that are reserved by and on behalf of the <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;_xarray_data_name&quot;</span>
<span class="s2">&quot;_xarray_dim_name&quot;</span>
<span class="s2">&quot;_xarray_coord_name&quot;</span>
<span class="s2">&quot;_xarray_attr_name&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling the <code class="docutils literal notranslate"><span class="pre">add_metadata_for_xarray()</span></code> method to add the reserved metadata names is necessary for the <code class="docutils literal notranslate"><span class="pre">transform_to_xarray()</span></code> method
to read the metadata names and unpack the data for the data format conversion.</p>
</div>
</section>
<section id="transform-to-xarray">
<h3>transform_to_xarray<a class="headerlink" href="#transform-to-xarray" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">transform_to_xarray()</span></code> converts from a SmartRedis dataset into a dictionary of keys as the name of the Xarray DataArray, and the values
as the actual converted Xarray DataArrays.</p>
<p>The transform to xarray method will retrieve the field names store in the Dataset under these metadata names
for populating the native xarray conversion to DataArray method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">xarray_ret</span> <span class="o">=</span> <span class="n">DatasetConverter</span><span class="o">.</span><span class="n">transform_to_xarray</span><span class="p">(</span><span class="n">ds1</span><span class="p">)</span>
</pre></div>
</div>
<p>An example of the returned dictionary of the <code class="docutils literal notranslate"><span class="pre">transform_to_xarray()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;1ddata&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span> <span class="s1">&#39;1ddata&#39;</span> <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span><span class="o">&gt;</span>
<span class="n">array</span><span class="p">([</span><span class="mf">0.75239102</span><span class="p">,</span> <span class="mf">0.87698733</span><span class="p">,</span> <span class="mf">0.57916855</span><span class="p">,</span> <span class="mf">0.59621001</span><span class="p">,</span> <span class="mf">0.22552972</span><span class="p">,</span>
    <span class="mf">0.17998833</span><span class="p">,</span> <span class="mf">0.27133364</span><span class="p">,</span> <span class="mf">0.3092101</span> <span class="p">,</span> <span class="mf">0.82813876</span><span class="p">,</span> <span class="mf">0.00731646</span><span class="p">])</span>
<span class="n">Coordinates</span><span class="p">:</span>
<span class="o">*</span> <span class="n">x</span>        <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">0.0</span> <span class="mf">40.0</span> <span class="mf">80.0</span> <span class="mf">120.0</span> <span class="mf">160.0</span> <span class="mf">200.0</span> <span class="mf">240.0</span> <span class="mf">280.0</span> <span class="mf">320.0</span> <span class="mf">360.0</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">units</span><span class="p">:</span>       <span class="n">m</span><span class="o">/</span><span class="n">s</span>
    <span class="n">longname</span><span class="p">:</span>    <span class="n">velocity</span>
    <span class="n">convention</span><span class="p">:</span>  <span class="n">CF1</span><span class="mf">.5</span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="sr_data_structures.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Data Structures</p>
      </div>
    </a>
    <a class="right-next"
       href="sr_runtime.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Runtime Requirements</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#xarray-dataset-conversions">Xarray DataSet Conversions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-metadata-for-xarray">add_metadata_for_xarray</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#transform-to-xarray">transform_to_xarray</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Cray Labs
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2021-2024, Hewlett Packard Enterprise.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  Questions? You can contact <a href="mailto:craylabs@hpe.com">contact us</a> or <a href="https://join.slack.com/t/craylabs/shared_invite/zt-nw3ag5z5-5PS4tIXBfufu1bIvvr71UA">join us on Slack!</a>
</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>